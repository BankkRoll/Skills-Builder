# hydrate and more

# hydrate

[API Reference](https://react.dev/reference/react)[APIs](https://react.dev/reference/react-dom)

# hydrate

### Deprecated

This API will be removed in a future major version of React.

In React 18, `hydrate` was replaced by [hydrateRoot.](https://react.dev/reference/react-dom/client/hydrateRoot) Using `hydrate` in React 18 will warn that your app will behave as if it’s running React 17. Learn more [here.](https://react.dev/blog/2022/03/08/react-18-upgrade-guide#updates-to-client-rendering-apis)

`hydrate` lets you display React components inside a browser DOM node whose HTML content was previously generated by [react-dom/server](https://react.dev/reference/react-dom/server) in React 17 and below.

$

```
hydrate(reactNode, domNode, callback?)
```

/$

- [Reference](#reference)
  - [hydrate(reactNode, domNode, callback?)](#hydrate)
- [Usage](#usage)
  - [Hydrating server-rendered HTML](#hydrating-server-rendered-html)
  - [Suppressing unavoidable hydration mismatch errors](#suppressing-unavoidable-hydration-mismatch-errors)
  - [Handling different client and server content](#handling-different-client-and-server-content)

---

## Reference

### hydrate(reactNode, domNode, callback?)

Call `hydrate` in React 17 and below to “attach” React to existing HTML that was already rendered by React in a server environment.

 $

```
import { hydrate } from 'react-dom';hydrate(reactNode, domNode);
```

/$

React will attach to the HTML that exists inside the `domNode`, and take over managing the DOM inside it. An app fully built with React will usually only have one `hydrate` call with its root component.

[See more examples below.](#usage)

#### Parameters

- `reactNode`: The “React node” used to render the existing HTML. This will usually be a piece of JSX like `<App />` which was rendered with a `ReactDOM Server` method such as `renderToString(<App />)` in React 17.
- `domNode`: A [DOM element](https://developer.mozilla.org/en-US/docs/Web/API/Element) that was rendered as the root element on the server.
- **optional**: `callback`: A function. If passed, React will call it after your component is hydrated.

#### Returns

`hydrate` returns null.

#### Caveats

- `hydrate` expects the rendered content to be identical with the server-rendered content. React can patch up differences in text content, but you should treat mismatches as bugs and fix them.
- In development mode, React warns about mismatches during hydration. There are no guarantees that attribute differences will be patched up in case of mismatches. This is important for performance reasons because in most apps, mismatches are rare, and so validating all markup would be prohibitively expensive.
- You’ll likely have only one `hydrate` call in your app. If you use a framework, it might do this call for you.
- If your app is client-rendered with no HTML rendered already, using `hydrate()` is not supported. Use [render()](https://react.dev/reference/react-dom/render) (for React 17 and below) or [createRoot()](https://react.dev/reference/react-dom/client/createRoot) (for React 18+) instead.

---

## Usage

Call `hydrate` to attach a React component into a server-rendered browser DOM node.

 $

```
import { hydrate } from 'react-dom';hydrate(<App />, document.getElementById('root'));
```

/$

Using `hydrate()` to render a client-only app (an app without server-rendered HTML) is not supported. Use [render()](https://react.dev/reference/react-dom/render) (in React 17 and below) or [createRoot()](https://react.dev/reference/react-dom/client/createRoot) (in React 18+) instead.

### Hydrating server-rendered HTML

In React, “hydration” is how React “attaches” to existing HTML that was already rendered by React in a server environment. During hydration, React will attempt to attach event listeners to the existing markup and take over rendering the app on the client.

In apps fully built with React, **you will usually only hydrate one “root”, once at startup for your entire app**.

 $[Fork](https://codesandbox.io/api/v1/sandboxes/define?undefined&environment=create-react-app)

```
import './styles.css';
import { hydrate } from 'react-dom';
import App from './App.js';

hydrate(<App />, document.getElementById('root'));
```

/$

Usually you shouldn’t need to call `hydrate` again or to call it in more places. From this point on, React will be managing the DOM of your application. To update the UI, your components will [use state.](https://react.dev/reference/react/useState)

For more information on hydration, see the docs for [hydrateRoot.](https://react.dev/reference/react-dom/client/hydrateRoot)

---

### Suppressing unavoidable hydration mismatch errors

If a single element’s attribute or text content is unavoidably different between the server and the client (for example, a timestamp), you may silence the hydration mismatch warning.

To silence hydration warnings on an element, add `suppressHydrationWarning={true}`:

 $[Fork](https://codesandbox.io/api/v1/sandboxes/define?undefined&environment=create-react-app)

```
export default function App() {
  return (
    <h1 suppressHydrationWarning={true}>
      Current Date: {new Date().toLocaleDateString()}
    </h1>
  );
}
```

/$

This only works one level deep, and is intended to be an escape hatch. Don’t overuse it. Unless it’s text content, React still won’t attempt to patch it up, so it may remain inconsistent until future updates.

---

### Handling different client and server content

If you intentionally need to render something different on the server and the client, you can do a two-pass rendering. Components that render something different on the client can read a [state variable](https://react.dev/reference/react/useState) like `isClient`, which you can set to `true` in an [Effect](https://react.dev/reference/react/useEffect):

 $[Fork](https://codesandbox.io/api/v1/sandboxes/define?undefined&environment=create-react-app)

```
import { useState, useEffect } from "react";

export default function App() {
  const [isClient, setIsClient] = useState(false);

  useEffect(() => {
    setIsClient(true);
  }, []);

  return (
    <h1>
      {isClient ? 'Is Client' : 'Is Server'}
    </h1>
  );
}
```

/$

This way the initial render pass will render the same content as the server, avoiding mismatches, but an additional pass will happen synchronously right after hydration.

### Pitfall

This approach makes hydration slower because your components have to render twice. Be mindful of the user experience on slow connections. The JavaScript code may load significantly later than the initial HTML render, so rendering a different UI immediately after hydration may feel jarring to the user.

[PreviousfindDOMNode](https://react.dev/reference/react-dom/findDOMNode)[Nextpreconnect](https://react.dev/reference/react-dom/preconnect)

---

# preconnect

[API Reference](https://react.dev/reference/react)[APIs](https://react.dev/reference/react-dom)

# preconnect

`preconnect` lets you eagerly connect to a server that you expect to load resources from.

$

```
preconnect("https://example.com");
```

/$

- [Reference](#reference)
  - [preconnect(href)](#preconnect)
- [Usage](#usage)
  - [Preconnecting when rendering](#preconnecting-when-rendering)
  - [Preconnecting in an event handler](#preconnecting-in-an-event-handler)

---

## Reference

### preconnect(href)

To preconnect to a host, call the `preconnect` function from `react-dom`.

 $

```
import { preconnect } from 'react-dom';function AppRoot() {  preconnect("https://example.com");  // ...}
```

/$

[See more examples below.](#usage)

The `preconnect` function provides the browser with a hint that it should open a connection to the given server. If the browser chooses to do so, this can speed up the loading of resources from that server.

#### Parameters

- `href`: a string. The URL of the server you want to connect to.

#### Returns

`preconnect` returns nothing.

#### Caveats

- Multiple calls to `preconnect` with the same server have the same effect as a single call.
- In the browser, you can call `preconnect` in any situation: while rendering a component, in an Effect, in an event handler, and so on.
- In server-side rendering or when rendering Server Components, `preconnect` only has an effect if you call it while rendering a component or in an async context originating from rendering a component. Any other calls will be ignored.
- If you know the specific resources you’ll need, you can call [other functions](https://react.dev/reference/react-dom#resource-preloading-apis) instead that will start loading the resources right away.
- There is no benefit to preconnecting to the same server the webpage itself is hosted from because it’s already been connected to by the time the hint would be given.

---

## Usage

### Preconnecting when rendering

Call `preconnect` when rendering a component if you know that its children will load external resources from that host.

 $

```
import { preconnect } from 'react-dom';function AppRoot() {  preconnect("https://example.com");  return ...;}
```

/$

### Preconnecting in an event handler

Call `preconnect` in an event handler before transitioning to a page or state where external resources will be needed. This gets the process started earlier than if you call it during the rendering of the new page or state.

 $

```
import { preconnect } from 'react-dom';function CallToAction() {  const onClick = () => {    preconnect('http://example.com');    startWizard();  }  return (    <button onClick={onClick}>Start Wizard</button>  );}
```

/$[PreviousflushSync](https://react.dev/reference/react-dom/flushSync)[NextprefetchDNS](https://react.dev/reference/react-dom/prefetchDNS)

---

# prefetchDNS

[API Reference](https://react.dev/reference/react)[APIs](https://react.dev/reference/react-dom)

# prefetchDNS

`prefetchDNS` lets you eagerly look up the IP of a server that you expect to load resources from.

$

```
prefetchDNS("https://example.com");
```

/$

- [Reference](#reference)
  - [prefetchDNS(href)](#prefetchdns)
- [Usage](#usage)
  - [Prefetching DNS when rendering](#prefetching-dns-when-rendering)
  - [Prefetching DNS in an event handler](#prefetching-dns-in-an-event-handler)

---

## Reference

### prefetchDNS(href)

To look up a host, call the `prefetchDNS` function from `react-dom`.

 $

```
import { prefetchDNS } from 'react-dom';function AppRoot() {  prefetchDNS("https://example.com");  // ...}
```

/$

[See more examples below.](#usage)

The prefetchDNS function provides the browser with a hint that it should look up the IP address of a given server. If the browser chooses to do so, this can speed up the loading of resources from that server.

#### Parameters

- `href`: a string. The URL of the server you want to connect to.

#### Returns

`prefetchDNS` returns nothing.

#### Caveats

- Multiple calls to `prefetchDNS` with the same server have the same effect as a single call.
- In the browser, you can call `prefetchDNS` in any situation: while rendering a component, in an Effect, in an event handler, and so on.
- In server-side rendering or when rendering Server Components, `prefetchDNS` only has an effect if you call it while rendering a component or in an async context originating from rendering a component. Any other calls will be ignored.
- If you know the specific resources you’ll need, you can call [other functions](https://react.dev/reference/react-dom#resource-preloading-apis) instead that will start loading the resources right away.
- There is no benefit to prefetching the same server the webpage itself is hosted from because it’s already been looked up by the time the hint would be given.
- Compared with [preconnect](https://react.dev/reference/react-dom/preconnect), `prefetchDNS` may be better if you are speculatively connecting to a large number of domains, in which case the overhead of preconnections might outweigh the benefit.

---

## Usage

### Prefetching DNS when rendering

Call `prefetchDNS` when rendering a component if you know that its children will load external resources from that host.

 $

```
import { prefetchDNS } from 'react-dom';function AppRoot() {  prefetchDNS("https://example.com");  return ...;}
```

/$

### Prefetching DNS in an event handler

Call `prefetchDNS` in an event handler before transitioning to a page or state where external resources will be needed. This gets the process started earlier than if you call it during the rendering of the new page or state.

 $

```
import { prefetchDNS } from 'react-dom';function CallToAction() {  const onClick = () => {    prefetchDNS('http://example.com');    startWizard();  }  return (    <button onClick={onClick}>Start Wizard</button>  );}
```

/$[Previouspreconnect](https://react.dev/reference/react-dom/preconnect)[Nextpreinit](https://react.dev/reference/react-dom/preinit)

---

# preinit

[API Reference](https://react.dev/reference/react)[APIs](https://react.dev/reference/react-dom)

# preinit

### Note

[React-based frameworks](https://react.dev/learn/creating-a-react-app) frequently handle resource loading for you, so you might not have to call this API yourself. Consult your framework’s documentation for details.

`preinit` lets you eagerly fetch and evaluate a stylesheet or external script.

$

```
preinit("https://example.com/script.js", {as: "script"});
```

/$

- [Reference](#reference)
  - [preinit(href, options)](#preinit)
- [Usage](#usage)
  - [Preiniting when rendering](#preiniting-when-rendering)
  - [Preiniting in an event handler](#preiniting-in-an-event-handler)

---

## Reference

### preinit(href, options)

To preinit a script or stylesheet, call the `preinit` function from `react-dom`.

 $

```
import { preinit } from 'react-dom';function AppRoot() {  preinit("https://example.com/script.js", {as: "script"});  // ...}
```

/$

[See more examples below.](#usage)

The `preinit` function provides the browser with a hint that it should start downloading and executing the given resource, which can save time. Scripts that you `preinit` are executed when they finish downloading. Stylesheets that you preinit are inserted into the document, which causes them to go into effect right away.

#### Parameters

- `href`: a string. The URL of the resource you want to download and execute.
- `options`: an object. It contains the following properties:
  - `as`: a required string. The type of resource. Its possible values are `script` and `style`.
  - `precedence`: a string. Required with stylesheets. Says where to insert the stylesheet relative to others. Stylesheets with higher precedence can override those with lower precedence. The possible values are `reset`, `low`, `medium`, `high`.
  - `crossOrigin`: a string. The [CORS policy](https://developer.mozilla.org/en-US/docs/Web/HTML/Attributes/crossorigin) to use. Its possible values are `anonymous` and `use-credentials`.
  - `integrity`: a string. A cryptographic hash of the resource, to [verify its authenticity](https://developer.mozilla.org/en-US/docs/Web/Security/Subresource_Integrity).
  - `nonce`: a string. A cryptographic [nonce to allow the resource](https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/nonce) when using a strict Content Security Policy.
  - `fetchPriority`: a string. Suggests a relative priority for fetching the resource. The possible values are `auto` (the default), `high`, and `low`.

#### Returns

`preinit` returns nothing.

#### Caveats

- Multiple calls to `preinit` with the same `href` have the same effect as a single call.
- In the browser, you can call `preinit` in any situation: while rendering a component, in an Effect, in an event handler, and so on.
- In server-side rendering or when rendering Server Components, `preinit` only has an effect if you call it while rendering a component or in an async context originating from rendering a component. Any other calls will be ignored.

---

## Usage

### Preiniting when rendering

Call `preinit` when rendering a component if you know that it or its children will use a specific resource, and you’re OK with the resource being evaluated and thereby taking effect immediately upon being downloaded.

#### Examples of preiniting

#### Example1of2:Preiniting an external script

$

```
import { preinit } from 'react-dom';function AppRoot() {  preinit("https://example.com/script.js", {as: "script"});  return ...;}
```

/$

If you want the browser to download the script but not to execute it right away, use [preload](https://react.dev/reference/react-dom/preload) instead. If you want to load an ESM module, use [preinitModule](https://react.dev/reference/react-dom/preinitModule).

### Preiniting in an event handler

Call `preinit` in an event handler before transitioning to a page or state where external resources will be needed. This gets the process started earlier than if you call it during the rendering of the new page or state.

 $

```
import { preinit } from 'react-dom';function CallToAction() {  const onClick = () => {    preinit("https://example.com/wizardStyles.css", {as: "style"});    startWizard();  }  return (    <button onClick={onClick}>Start Wizard</button>  );}
```

/$[PreviousprefetchDNS](https://react.dev/reference/react-dom/prefetchDNS)[NextpreinitModule](https://react.dev/reference/react-dom/preinitModule)

---

# preinitModule

[API Reference](https://react.dev/reference/react)[APIs](https://react.dev/reference/react-dom)

# preinitModule

### Note

[React-based frameworks](https://react.dev/learn/creating-a-react-app) frequently handle resource loading for you, so you might not have to call this API yourself. Consult your framework’s documentation for details.

`preinitModule` lets you eagerly fetch and evaluate an ESM module.

$

```
preinitModule("https://example.com/module.js", {as: "script"});
```

/$

- [Reference](#reference)
  - [preinitModule(href, options)](#preinitmodule)
- [Usage](#usage)
  - [Preloading when rendering](#preloading-when-rendering)
  - [Preloading in an event handler](#preloading-in-an-event-handler)

---

## Reference

### preinitModule(href, options)

To preinit an ESM module, call the `preinitModule` function from `react-dom`.

 $

```
import { preinitModule } from 'react-dom';function AppRoot() {  preinitModule("https://example.com/module.js", {as: "script"});  // ...}
```

/$

[See more examples below.](#usage)

The `preinitModule` function provides the browser with a hint that it should start downloading and executing the given module, which can save time. Modules that you `preinit` are executed when they finish downloading.

#### Parameters

- `href`: a string. The URL of the module you want to download and execute.
- `options`: an object. It contains the following properties:
  - `as`: a required string. It must be `'script'`.
  - `crossOrigin`: a string. The [CORS policy](https://developer.mozilla.org/en-US/docs/Web/HTML/Attributes/crossorigin) to use. Its possible values are `anonymous` and `use-credentials`.
  - `integrity`: a string. A cryptographic hash of the module, to [verify its authenticity](https://developer.mozilla.org/en-US/docs/Web/Security/Subresource_Integrity).
  - `nonce`: a string. A cryptographic [nonce to allow the module](https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/nonce) when using a strict Content Security Policy.

#### Returns

`preinitModule` returns nothing.

#### Caveats

- Multiple calls to `preinitModule` with the same `href` have the same effect as a single call.
- In the browser, you can call `preinitModule` in any situation: while rendering a component, in an Effect, in an event handler, and so on.
- In server-side rendering or when rendering Server Components, `preinitModule` only has an effect if you call it while rendering a component or in an async context originating from rendering a component. Any other calls will be ignored.

---

## Usage

### Preloading when rendering

Call `preinitModule` when rendering a component if you know that it or its children will use a specific module and you’re OK with the module being evaluated and thereby taking effect immediately upon being downloaded.

 $

```
import { preinitModule } from 'react-dom';function AppRoot() {  preinitModule("https://example.com/module.js", {as: "script"});  return ...;}
```

/$

If you want the browser to download the module but not to execute it right away, use [preloadModule](https://react.dev/reference/react-dom/preloadModule) instead. If you want to preinit a script that isn’t an ESM module, use [preinit](https://react.dev/reference/react-dom/preinit).

### Preloading in an event handler

Call `preinitModule` in an event handler before transitioning to a page or state where the module will be needed. This gets the process started earlier than if you call it during the rendering of the new page or state.

 $

```
import { preinitModule } from 'react-dom';function CallToAction() {  const onClick = () => {    preinitModule("https://example.com/module.js", {as: "script"});    startWizard();  }  return (    <button onClick={onClick}>Start Wizard</button>  );}
```

/$[Previouspreinit](https://react.dev/reference/react-dom/preinit)[Nextpreload](https://react.dev/reference/react-dom/preload)

---

# preload

[API Reference](https://react.dev/reference/react)[APIs](https://react.dev/reference/react-dom)

# preload

### Note

[React-based frameworks](https://react.dev/learn/creating-a-react-app) frequently handle resource loading for you, so you might not have to call this API yourself. Consult your framework’s documentation for details.

`preload` lets you eagerly fetch a resource such as a stylesheet, font, or external script that you expect to use.

$

```
preload("https://example.com/font.woff2", {as: "font"});
```

/$

- [Reference](#reference)
  - [preload(href, options)](#preload)
- [Usage](#usage)
  - [Preloading when rendering](#preloading-when-rendering)
  - [Preloading in an event handler](#preloading-in-an-event-handler)

---

## Reference

### preload(href, options)

To preload a resource, call the `preload` function from `react-dom`.

 $

```
import { preload } from 'react-dom';function AppRoot() {  preload("https://example.com/font.woff2", {as: "font"});  // ...}
```

/$

[See more examples below.](#usage)

The `preload` function provides the browser with a hint that it should start downloading the given resource, which can save time.

#### Parameters

- `href`: a string. The URL of the resource you want to download.
- `options`: an object. It contains the following properties:
  - `as`: a required string. The type of resource. Its [possible values](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/link#as) are `audio`, `document`, `embed`, `fetch`, `font`, `image`, `object`, `script`, `style`, `track`, `video`, `worker`.
  - `crossOrigin`: a string. The [CORS policy](https://developer.mozilla.org/en-US/docs/Web/HTML/Attributes/crossorigin) to use. Its possible values are `anonymous` and `use-credentials`. It is required when `as` is set to `"fetch"`.
  - `referrerPolicy`: a string. The [Referrer header](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/link#referrerpolicy) to send when fetching. Its possible values are `no-referrer-when-downgrade` (the default), `no-referrer`, `origin`, `origin-when-cross-origin`, and `unsafe-url`.
  - `integrity`: a string. A cryptographic hash of the resource, to [verify its authenticity](https://developer.mozilla.org/en-US/docs/Web/Security/Subresource_Integrity).
  - `type`: a string. The MIME type of the resource.
  - `nonce`: a string. A cryptographic [nonce to allow the resource](https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/nonce) when using a strict Content Security Policy.
  - `fetchPriority`: a string. Suggests a relative priority for fetching the resource. The possible values are `auto` (the default), `high`, and `low`.
  - `imageSrcSet`: a string. For use only with `as: "image"`. Specifies the [source set of the image](https://developer.mozilla.org/en-US/docs/Learn/HTML/Multimedia_and_embedding/Responsive_images).
  - `imageSizes`: a string. For use only with `as: "image"`. Specifies the [sizes of the image](https://developer.mozilla.org/en-US/docs/Learn/HTML/Multimedia_and_embedding/Responsive_images).

#### Returns

`preload` returns nothing.

#### Caveats

- Multiple equivalent calls to `preload` have the same effect as a single call. Calls to `preload` are considered equivalent according to the following rules:
  - Two calls are equivalent if they have the same `href`, except:
  - If `as` is set to `image`, two calls are equivalent if they have the same `href`, `imageSrcSet`, and `imageSizes`.
- In the browser, you can call `preload` in any situation: while rendering a component, in an Effect, in an event handler, and so on.
- In server-side rendering or when rendering Server Components, `preload` only has an effect if you call it while rendering a component or in an async context originating from rendering a component. Any other calls will be ignored.

---

## Usage

### Preloading when rendering

Call `preload` when rendering a component if you know that it or its children will use a specific resource.

#### Examples of preloading

#### Example1of4:Preloading an external script

$

```
import { preload } from 'react-dom';function AppRoot() {  preload("https://example.com/script.js", {as: "script"});  return ...;}
```

/$

If you want the browser to start executing the script immediately (rather than just downloading it), use [preinit](https://react.dev/reference/react-dom/preinit) instead. If you want to load an ESM module, use [preloadModule](https://react.dev/reference/react-dom/preloadModule).

### Preloading in an event handler

Call `preload` in an event handler before transitioning to a page or state where external resources will be needed. This gets the process started earlier than if you call it during the rendering of the new page or state.

 $

```
import { preload } from 'react-dom';function CallToAction() {  const onClick = () => {    preload("https://example.com/wizardStyles.css", {as: "style"});    startWizard();  }  return (    <button onClick={onClick}>Start Wizard</button>  );}
```

/$[PreviouspreinitModule](https://react.dev/reference/react-dom/preinitModule)[NextpreloadModule](https://react.dev/reference/react-dom/preloadModule)

---

# preloadModule

[API Reference](https://react.dev/reference/react)[APIs](https://react.dev/reference/react-dom)

# preloadModule

### Note

[React-based frameworks](https://react.dev/learn/creating-a-react-app) frequently handle resource loading for you, so you might not have to call this API yourself. Consult your framework’s documentation for details.

`preloadModule` lets you eagerly fetch an ESM module that you expect to use.

$

```
preloadModule("https://example.com/module.js", {as: "script"});
```

/$

- [Reference](#reference)
  - [preloadModule(href, options)](#preloadmodule)
- [Usage](#usage)
  - [Preloading when rendering](#preloading-when-rendering)
  - [Preloading in an event handler](#preloading-in-an-event-handler)

---

## Reference

### preloadModule(href, options)

To preload an ESM module, call the `preloadModule` function from `react-dom`.

 $

```
import { preloadModule } from 'react-dom';function AppRoot() {  preloadModule("https://example.com/module.js", {as: "script"});  // ...}
```

/$

[See more examples below.](#usage)

The `preloadModule` function provides the browser with a hint that it should start downloading the given module, which can save time.

#### Parameters

- `href`: a string. The URL of the module you want to download.
- `options`: an object. It contains the following properties:
  - `as`: a required string. It must be `'script'`.
  - `crossOrigin`: a string. The [CORS policy](https://developer.mozilla.org/en-US/docs/Web/HTML/Attributes/crossorigin) to use. Its possible values are `anonymous` and `use-credentials`.
  - `integrity`: a string. A cryptographic hash of the module, to [verify its authenticity](https://developer.mozilla.org/en-US/docs/Web/Security/Subresource_Integrity).
  - `nonce`: a string. A cryptographic [nonce to allow the module](https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/nonce) when using a strict Content Security Policy.

#### Returns

`preloadModule` returns nothing.

#### Caveats

- Multiple calls to `preloadModule` with the same `href` have the same effect as a single call.
- In the browser, you can call `preloadModule` in any situation: while rendering a component, in an Effect, in an event handler, and so on.
- In server-side rendering or when rendering Server Components, `preloadModule` only has an effect if you call it while rendering a component or in an async context originating from rendering a component. Any other calls will be ignored.

---

## Usage

### Preloading when rendering

Call `preloadModule` when rendering a component if you know that it or its children will use a specific module.

 $

```
import { preloadModule } from 'react-dom';function AppRoot() {  preloadModule("https://example.com/module.js", {as: "script"});  return ...;}
```

/$

If you want the browser to start executing the module immediately (rather than just downloading it), use [preinitModule](https://react.dev/reference/react-dom/preinitModule) instead. If you want to load a script that isn’t an ESM module, use [preload](https://react.dev/reference/react-dom/preload).

### Preloading in an event handler

Call `preloadModule` in an event handler before transitioning to a page or state where the module will be needed. This gets the process started earlier than if you call it during the rendering of the new page or state.

 $

```
import { preloadModule } from 'react-dom';function CallToAction() {  const onClick = () => {    preloadModule("https://example.com/module.js", {as: "script"});    startWizard();  }  return (    <button onClick={onClick}>Start Wizard</button>  );}
```

/$[Previouspreload](https://react.dev/reference/react-dom/preload)[NextClient APIs](https://react.dev/reference/react-dom/client)

---

# render

[API Reference](https://react.dev/reference/react)[APIs](https://react.dev/reference/react-dom)

# render

### Deprecated

This API will be removed in a future major version of React.

In React 18, `render` was replaced by [createRoot.](https://react.dev/reference/react-dom/client/createRoot) Using `render` in React 18 will warn that your app will behave as if it’s running React 17. Learn more [here.](https://react.dev/blog/2022/03/08/react-18-upgrade-guide#updates-to-client-rendering-apis)

`render` renders a piece of [JSX](https://react.dev/learn/writing-markup-with-jsx) (“React node”) into a browser DOM node.

$

```
render(reactNode, domNode, callback?)
```

/$

- [Reference](#reference)
  - [render(reactNode, domNode, callback?)](#render)
- [Usage](#usage)
  - [Rendering the root component](#rendering-the-root-component)
  - [Rendering multiple roots](#rendering-multiple-roots)
  - [Updating the rendered tree](#updating-the-rendered-tree)

---

## Reference

### render(reactNode, domNode, callback?)

Call `render` to display a React component inside a browser DOM element.

 $

```
import { render } from 'react-dom';const domNode = document.getElementById('root');render(<App />, domNode);
```

/$

React will display `<App />` in the `domNode`, and take over managing the DOM inside it.

An app fully built with React will usually only have one `render` call with its root component.  A page that uses “sprinkles” of React for parts of the page may have as many `render` calls as needed.

[See more examples below.](#usage)

#### Parameters

- `reactNode`: A *React node* that you want to display. This will usually be a piece of JSX like `<App />`, but you can also pass a React element constructed with [createElement()](https://react.dev/reference/react/createElement), a string, a number, `null`, or `undefined`.
- `domNode`: A [DOM element.](https://developer.mozilla.org/en-US/docs/Web/API/Element) React will display the `reactNode` you pass inside this DOM element. From this moment, React will manage the DOM inside the `domNode` and update it when your React tree changes.
- **optional** `callback`: A function. If passed, React will call it after your component is placed into the DOM.

#### Returns

`render` usually returns `null`. However, if the `reactNode` you pass is a *class component*, then it will return an instance of that component.

#### Caveats

- In React 18, `render` was replaced by [createRoot.](https://react.dev/reference/react-dom/client/createRoot) Please use `createRoot` for React 18 and beyond.
- The first time you call `render`, React will clear all the existing HTML content inside the `domNode` before rendering the React component into it. If your `domNode` contains HTML generated by React on the server or during the build, use [hydrate()](https://react.dev/reference/react-dom/hydrate) instead, which attaches the event handlers to the existing HTML.
- If you call `render` on the same `domNode` more than once, React will update the DOM as necessary to reflect the latest JSX you passed. React will decide which parts of the DOM can be reused and which need to be recreated by [“matching it up”](https://react.dev/learn/preserving-and-resetting-state) with the previously rendered tree. Calling `render` on the same `domNode` again is similar to calling the [setfunction](https://react.dev/reference/react/useState#setstate) on the root component: React avoids unnecessary DOM updates.
- If your app is fully built with React, you’ll likely have only one `render` call in your app. (If you use a framework, it might do this call for you.) When you want to render a piece of JSX in a different part of the DOM tree that isn’t a child of your component (for example, a modal or a tooltip), use [createPortal](https://react.dev/reference/react-dom/createPortal) instead of `render`.

---

## Usage

Call `render` to display a React component inside a browser DOM node.

 $

```
import { render } from 'react-dom';import App from './App.js';render(<App />, document.getElementById('root'));
```

/$

### Rendering the root component

In apps fully built with React, **you will usually only do this once at startup**—to render the “root” component.

 $[Fork](https://codesandbox.io/api/v1/sandboxes/define?undefined&environment=create-react-app)

```
import './styles.css';
import { render } from 'react-dom';
import App from './App.js';

render(<App />, document.getElementById('root'));
```

/$

Usually you shouldn’t need to call `render` again or to call it in more places. From this point on, React will be managing the DOM of your application. To update the UI, your components will [use state.](https://react.dev/reference/react/useState)

---

### Rendering multiple roots

If your page [isn’t fully built with React](https://react.dev/learn/add-react-to-an-existing-project#using-react-for-a-part-of-your-existing-page), call `render` for each top-level piece of UI managed by React.

 $[Fork](https://codesandbox.io/api/v1/sandboxes/define?undefined&environment=create-react-app)

```
import './styles.css';
import { render } from 'react-dom';
import { Comments, Navigation } from './Components.js';

render(
  <Navigation />,
  document.getElementById('navigation')
);

render(
  <Comments />,
  document.getElementById('comments')
);
```

/$

You can destroy the rendered trees with [unmountComponentAtNode().](https://react.dev/reference/react-dom/unmountComponentAtNode)

---

### Updating the rendered tree

You can call `render` more than once on the same DOM node. As long as the component tree structure matches up with what was previously rendered, React will [preserve the state.](https://react.dev/learn/preserving-and-resetting-state) Notice how you can type in the input, which means that the updates from repeated `render` calls every second are not destructive:

 $[Fork](https://codesandbox.io/api/v1/sandboxes/define?undefined&environment=create-react-app)

```
import { render } from 'react-dom';
import './styles.css';
import App from './App.js';

let i = 0;
setInterval(() => {
  render(
    <App counter={i} />,
    document.getElementById('root')
  );
  i++;
}, 1000);
```

/$

It is uncommon to call `render` multiple times. Usually, you’ll [update state](https://react.dev/reference/react/useState) inside your components instead.

[PreviouspreloadModule](https://react.dev/reference/react-dom/preloadModule)[NextunmountComponentAtNode](https://react.dev/reference/react-dom/unmountComponentAtNode)

---

# renderToNodeStream

[API Reference](https://react.dev/reference/react)[Server APIs](https://react.dev/reference/react-dom/server)

# renderToNodeStream

### Deprecated

This API will be removed in a future major version of React. Use [renderToPipeableStream](https://react.dev/reference/react-dom/server/renderToPipeableStream) instead.

`renderToNodeStream` renders a React tree to a [Node.js Readable Stream.](https://nodejs.org/api/stream.html#readable-streams)

$

```
const stream = renderToNodeStream(reactNode, options?)
```

/$

- [Reference](#reference)
  - [renderToNodeStream(reactNode, options?)](#rendertonodestream)
- [Usage](#usage)
  - [Rendering a React tree as HTML to a Node.js Readable Stream](#rendering-a-react-tree-as-html-to-a-nodejs-readable-stream)

---

## Reference

### renderToNodeStream(reactNode, options?)

On the server, call `renderToNodeStream` to get a [Node.js Readable Stream](https://nodejs.org/api/stream.html#readable-streams) which you can pipe into the response.

 $

```
import { renderToNodeStream } from 'react-dom/server';const stream = renderToNodeStream(<App />);stream.pipe(response);
```

/$

On the client, call [hydrateRoot](https://react.dev/reference/react-dom/client/hydrateRoot) to make the server-generated HTML interactive.

[See more examples below.](#usage)

#### Parameters

- `reactNode`: A React node you want to render to HTML. For example, a JSX element like `<App />`.
- **optional** `options`: An object for server render.
  - **optional** `identifierPrefix`: A string prefix React uses for IDs generated by [useId.](https://react.dev/reference/react/useId) Useful to avoid conflicts when using multiple roots on the same page. Must be the same prefix as passed to [hydrateRoot.](https://react.dev/reference/react-dom/client/hydrateRoot#parameters)

#### Returns

A [Node.js Readable Stream](https://nodejs.org/api/stream.html#readable-streams) that outputs an HTML string.

#### Caveats

- This method will wait for all [Suspense boundaries](https://react.dev/reference/react/Suspense) to complete before returning any output.
- As of React 18, this method buffers all of its output, so it doesn’t actually provide any streaming benefits. This is why it’s recommended that you migrate to [renderToPipeableStream](https://react.dev/reference/react-dom/server/renderToPipeableStream) instead.
- The returned stream is a byte stream encoded in utf-8. If you need a stream in another encoding, take a look at a project like [iconv-lite](https://www.npmjs.com/package/iconv-lite), which provides transform streams for transcoding text.

---

## Usage

### Rendering a React tree as HTML to a Node.js Readable Stream

Call `renderToNodeStream` to get a [Node.js Readable Stream](https://nodejs.org/api/stream.html#readable-streams) which you can pipe to your server response:

 $

```
import { renderToNodeStream } from 'react-dom/server';// The route handler syntax depends on your backend frameworkapp.use('/', (request, response) => {  const stream = renderToNodeStream(<App />);  stream.pipe(response);});
```

/$

The stream will produce the initial non-interactive HTML output of your React components. On the client, you will need to call [hydrateRoot](https://react.dev/reference/react-dom/client/hydrateRoot) to *hydrate* that server-generated HTML and make it interactive.

[PreviousServer APIs](https://react.dev/reference/react-dom/server)[NextrenderToPipeableStream](https://react.dev/reference/react-dom/server/renderToPipeableStream)
