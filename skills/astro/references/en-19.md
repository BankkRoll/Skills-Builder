# Deploy your Astro Site to Zephyr Cloud and more

# Deploy your Astro Site to Zephyr Cloud

> How to deploy your Astro site to the web using Zephyr Cloud.

# Deploy your Astro Site to Zephyr Cloud

You can use [Zephyr Cloud](https://zephyr-cloud.io) to deploy an Astro site with intelligent asset management, comprehensive build analytics, and first-class support for Module Federation architectures.

Zephyr operates on a **Bring Your Own Cloud (BYOC)** model, deploy to your choice of [supported clouds](https://docs.zephyr-cloud.io/cloud) through a unified interface without vendor lock-in. Switch providers anytime without changing your deployment workflow.

## How to deploy

[Section titled “How to deploy”](#how-to-deploy)

### Automatic Installation

[Section titled “Automatic Installation”](#automatic-installation)

1. Add the Zephyr integration to your Astro project with the following command. This will install the integration and update your `astro.config.mjs` file automatically:
  - [npm](#tab-panel-2900)
  - [pnpm](#tab-panel-2901)
  - [Yarn](#tab-panel-2902)
     Terminal window
  ```
  npx with-zephyr@latest
  ```
     Terminal window
  ```
  pnpm dlx with-zephyr@latest
  ```
     Terminal window
  ```
  yarn dlx with-zephyr@latest
  ```
2. Build and deploy your Astro site:
  - [npm](#tab-panel-2903)
  - [pnpm](#tab-panel-2904)
  - [Yarn](#tab-panel-2905)
     Terminal window
  ```
  npm run build
  ```
     Terminal window
  ```
  pnpm run build
  ```
     Terminal window
  ```
  yarn run build
  ```
3. Your application is deployed! Zephyr will provide a deployment URL and comprehensive build analytics.

### Manual Installation

[Section titled “Manual Installation”](#manual-installation)

1. Install the Zephyr Astro integration:
  - [npm](#tab-panel-2906)
  - [pnpm](#tab-panel-2907)
  - [Yarn](#tab-panel-2908)
     Terminal window
  ```
  npm install zephyr-astro-integration
  ```
     Terminal window
  ```
  pnpm add zephyr-astro-integration
  ```
     Terminal window
  ```
  yarn add zephyr-astro-integration
  ```
2. Add the integration to your `astro.config.mjs`:
  ```
  import { defineConfig } from 'astro/config';import { withZephyr } from 'zephyr-astro-integration';
  export default defineConfig({  integrations: [    withZephyr(),  ],});
  ```
3. Build and deploy your Astro site:
  - [npm](#tab-panel-2909)
  - [pnpm](#tab-panel-2910)
  - [Yarn](#tab-panel-2911)
     Terminal window
  ```
  npm run build
  ```
     Terminal window
  ```
  pnpm run build
  ```
     Terminal window
  ```
  yarn run build
  ```
4. Your application is deployed! Zephyr will provide a deployment URL and comprehensive build analytics.

### More details

[Section titled “More details”](#more-details)

For more detailed information refer to the [Zephyr Cloud documentation on deploying with Astro](https://docs.zephyr-cloud.io/meta-frameworks/astro).

## What happens during deployment

[Section titled “What happens during deployment”](#what-happens-during-deployment)

When you build your Astro site with the Zephyr integration, the following process occurs:

1. **Build Context Extraction**: Zephyr captures Git information (commit, branch, author) and package metadata
2. **Asset Hashing**: All build outputs are hashed using SHA-256 for content-addressable storage
3. **Delta Detection**: Zephyr queries the CDN edge to identify which assets already exist
4. **Optimized Upload**: Only new or modified assets are uploaded
5. **Snapshot Creation**: An immutable deployment snapshot is created with all asset references
6. **Analytics Upload**: Build statistics, module graphs, and dependency information are sent to the dashboard
7. **CDN Deployment**: Assets are published to your configured CDN with permanent cache headers

## Official Resources

[Section titled “Official Resources”](#official-resources)

- [Zephyr Cloud Documentation](https://docs.zephyr-cloud.io)
- [Zephyr Astro Integration on GitHub](https://github.com/ZephyrCloudIO/zephyr-packages/tree/main/libs/zephyr-astro-integration)
- [Zephyr Cloud Platform](https://zephyr-cloud.io)

## More Deployment Guides

- ![](https://docs.astro.build/logos/aws.svg)
  ### AWS
- ![](https://docs.astro.build/logos/flightcontrol.svg)
  ### AWS via Flightcontrol
- ![](https://docs.astro.build/logos/sst.svg)
  ### AWS via SST
- ![](https://docs.astro.build/logos/azion.svg)
  ### Azion
- ![](https://docs.astro.build/logos/buddy.svg)
  ### Buddy
- ![](https://docs.astro.build/logos/cleavr.svg)
  ### Cleavr
- ![](https://docs.astro.build/logos/clever-cloud.svg)
  ### Clever Cloud
- ![](https://docs.astro.build/logos/cloudflare-pages.svg)
  ### Cloudflare
- ![](https://docs.astro.build/logos/cloudray.svg)
  ### CloudRay
- ![](https://docs.astro.build/logos/deno.svg)
  ### Deno Deploy
- ![](https://docs.astro.build/logos/deployhq.svg)
  ### DeployHQ
- ![](https://docs.astro.build/logos/edgeone-pages.svg)
  ### EdgeOne Pages
- ![](https://docs.astro.build/logos/firebase.svg)
  ### Firebase
- ![](https://docs.astro.build/logos/fleek.svg)
  ### Fleek
- ![](https://docs.astro.build/logos/flyio.svg)
  ### Fly.io
- ![](https://docs.astro.build/logos/github.svg)
  ### GitHub Pages
- ![](https://docs.astro.build/logos/gitlab.svg)
  ### GitLab Pages
- ![](https://docs.astro.build/logos/google-cloud.svg)
  ### Google Cloud
- ![](https://docs.astro.build/logos/heroku.svg)
  ### Heroku
- ![](https://docs.astro.build/logos/juno.svg)
  ### Juno
- ![](https://docs.astro.build/logos/kinsta.svg)
  ### Kinsta
- ![](https://docs.astro.build/logos/microsoft-azure.svg)
  ### Microsoft Azure
- ![](https://docs.astro.build/logos/netlify.svg)
  ### Netlify
- ![](https://docs.astro.build/logos/railway.svg)
  ### Railway
- ![](https://docs.astro.build/logos/render.svg)
  ### Render
- ![](https://docs.astro.build/logos/seenode.svg)
  ### Seenode
- ![](https://docs.astro.build/logos/stormkit.svg)
  ### Stormkit
- ![](https://docs.astro.build/logos/surge.svg)
  ### Surge
- ![](https://docs.astro.build/logos/vercel.svg)
  ### Vercel
- ![](https://docs.astro.build/logos/zeabur.svg)
  ### Zeabur
- ![](https://docs.astro.build/logos/zephyr.svg)
  ### Zephyr Cloud
- ![](https://docs.astro.build/logos/zerops.svg)
  ### Zerops

   Recipes     [Contribute](https://docs.astro.build/en/contribute/) [Community](https://astro.build/chat) [Sponsor](https://opencollective.com/astrodotbuild)

---

# Deploy your Astro Site to Zerops

> How to deploy your Astro site to the web using Zerops.

# Deploy your Astro Site to Zerops

[Zerops](https://zerops.io/) is a dev-first cloud platform that can be used to deploy both Static and SSR Astro site.

This guide will walk you through setting up and deploying both Static and SSR Astro sites on Zerops.

Running apps on Zerops requires two steps:

1. Creating a project
2. Triggering build & deploy pipeline

## Astro Static site on Zerops

[Section titled “Astro Static site on Zerops”](#astro-static-site-on-zerops)

### Creating a project and a service for Astro Static

[Section titled “Creating a project and a service for Astro Static”](#creating-a-project-and-a-service-for-astro-static)

Projects and services can be added either through a [Project add](https://app.zerops.io/dashboard/project-add) wizard or imported using a yaml structure:

```
# see https://docs.zerops.io/references/import for full referenceproject:  name: recipe-astroservices:  - hostname: app    type: static
```

This will create a project called `recipe-astro` with a Zerops Static service called `app`.

### Deploying your Astro Static site

[Section titled “Deploying your Astro Static site”](#deploying-your-astro-static-site)

To tell Zerops how to build and run your site, add a `zerops.yml` to your repository:

- [npm](#tab-panel-2912)
- [pnpm](#tab-panel-2913)
- [Yarn](#tab-panel-2914)

   zerops.yml

```
# see https://docs.zerops.io/zerops-yml/specification for full referencezerops:  - setup: app    build:      base: nodejs@20      buildCommands:        - npm i        - npm build      deployFiles:        - dist/~    run:      base: static
```

   zerops.yml

```
# see https://docs.zerops.io/zerops-yml/specification for full referencezerops:  - setup: app    build:      base: nodejs@20      buildCommands:        - pnpm i        - pnpm build      deployFiles:        - dist/~    run:      base: static
```

   zerops.yml

```
# see https://docs.zerops.io/zerops-yml/specification for full referencezerops:  - setup: app    build:      base: nodejs@20      buildCommands:        - yarn        - yarn build      deployFiles:        - dist/~    run:      base: static
```

Now you can [trigger the build & deploy pipeline using the Zerops CLI](#trigger-the-pipeline-using-zerops-cli-zcli) or by connecting the `app` service with your [GitHub](https://docs.zerops.io/references/github-integration/) / [GitLab](https://docs.zerops.io/references/gitlab-integration) repository from inside the service detail.

## Astro SSR site on Zerops

[Section titled “Astro SSR site on Zerops”](#astro-ssr-site-on-zerops)

### Update scripts

[Section titled “Update scripts”](#update-scripts)

Update your `start` script to run the server output from the Node adapter.

 package.json

```
"scripts": {  "start": "node ./dist/server/entry.mjs",}
```

### Creating a project and a service for Astro SSR (Node.js)

[Section titled “Creating a project and a service for Astro SSR (Node.js)”](#creating-a-project-and-a-service-for-astro-ssr-nodejs)

Projects and services can be added either through a [Project add](https://app.zerops.io/dashboard/project-add) wizard or imported using a yaml structure:

```
# see https://docs.zerops.io/references/import for full referenceproject:  name: recipe-astroservices:  - hostname: app    type: nodejs@20
```

This will create a project called `recipe-astro` with Zerops Node.js service called `app`.

### Deploying your Astro SSR site

[Section titled “Deploying your Astro SSR site”](#deploying-your-astro-ssr-site)

To tell Zerops how to build and run your site using the official [Astro Node.js adapter](https://docs.astro.build/en/guides/integrations-guide/node/) in `standalone` mode, add a `zerops.yml` file to your repository:

- [npm](#tab-panel-2915)
- [pnpm](#tab-panel-2916)
- [Yarn](#tab-panel-2917)

   zerops.yml

```
# see https://docs.zerops.io/zerops-yml/specification for full referencezerops:  - setup: app    build:      base: nodejs@20      buildCommands:        - npm i        - npm run build      deployFiles:        - dist        - package.json        - node_modules    run:      base: nodejs@20      ports:        - port: 3000          httpSupport: true      envVariables:        PORT: 3000        HOST: 0.0.0.0      start: npm start
```

   zerops.yml

```
# see https://docs.zerops.io/zerops-yml/specification for full referencezerops:  - setup: app    build:      base: nodejs@20      buildCommands:        - pnpm i        - pnpm run build      deployFiles:        - dist        - package.json        - node_modules    run:      base: nodejs@20      ports:        - port: 3000          httpSupport: true      envVariables:        PORT: 3000        HOST: 0.0.0.0      start: pnpm start
```

   zerops.yml

```
# see https://docs.zerops.io/zerops-yml/specification for full referencezerops:  - setup: app    build:      base: nodejs@20      buildCommands:        - yarn        - yarn build      deployFiles:        - dist        - package.json        - node_modules    run:      base: nodejs@20      ports:        - port: 3000          httpSupport: true      envVariables:        PORT: 3000        HOST: 0.0.0.0      start: yarn start
```

Now you can [trigger the build & deploy pipeline using the Zerops CLI](#trigger-the-pipeline-using-zerops-cli-zcli) or by connecting the `app` service with your [GitHub](https://docs.zerops.io/references/github-integration/) / [GitLab](https://docs.zerops.io/references/gitlab-integration) repository from inside the service detail.

## Trigger the pipeline using Zerops CLI (zcli)

[Section titled “Trigger the pipeline using Zerops CLI (zcli)”](#trigger-the-pipeline-using-zerops-cli-zcli)

1. Install the Zerops CLI.
   Terminal window
  ```
  # To download the zcli binary directly,# use https://github.com/zeropsio/zcli/releasesnpm i -g @zerops/zcli
  ```
2. Open [Settings > Access Token Management](https://app.zerops.io/settings/token-management) in the Zerops app and generate a new access token.
3. Log in using your access token with the following command:
   Terminal window
  ```
  zcli login <token>
  ```
4. Navigate to the root of your app (where `zerops.yml` is located) and run the following command to trigger the deploy:
   Terminal window
  ```
  zcli push
  ```

## Resources

[Section titled “Resources”](#resources)

### Official

[Section titled “Official”](#official)

- [Create Zerops account](https://app.zerops.io/registration)
- [Zerops Documentation](https://docs.zerops.io)
- [Zerops Astro recipe](https://app.zerops.io/recipe/astro)

### Community

[Section titled “Community”](#community)

- [Deploying Astro to Zerops in 3 mins](https://medium.com/@arjunaditya/how-to-deploy-astro-to-zerops-4230816a62b4)
- [Deploying Astro SSG with Node.js on Zerops with One Click Deploy](https://youtu.be/-4KTa4VWtBE)
- [Deploying Astro SSR with Node.js on Zerops with One Click Deploy](https://youtu.be/eR6b_JnDH6g)

## More Deployment Guides

- ![](https://docs.astro.build/logos/aws.svg)
  ### AWS
- ![](https://docs.astro.build/logos/flightcontrol.svg)
  ### AWS via Flightcontrol
- ![](https://docs.astro.build/logos/sst.svg)
  ### AWS via SST
- ![](https://docs.astro.build/logos/azion.svg)
  ### Azion
- ![](https://docs.astro.build/logos/buddy.svg)
  ### Buddy
- ![](https://docs.astro.build/logos/cleavr.svg)
  ### Cleavr
- ![](https://docs.astro.build/logos/clever-cloud.svg)
  ### Clever Cloud
- ![](https://docs.astro.build/logos/cloudflare-pages.svg)
  ### Cloudflare
- ![](https://docs.astro.build/logos/cloudray.svg)
  ### CloudRay
- ![](https://docs.astro.build/logos/deno.svg)
  ### Deno Deploy
- ![](https://docs.astro.build/logos/deployhq.svg)
  ### DeployHQ
- ![](https://docs.astro.build/logos/edgeone-pages.svg)
  ### EdgeOne Pages
- ![](https://docs.astro.build/logos/firebase.svg)
  ### Firebase
- ![](https://docs.astro.build/logos/fleek.svg)
  ### Fleek
- ![](https://docs.astro.build/logos/flyio.svg)
  ### Fly.io
- ![](https://docs.astro.build/logos/github.svg)
  ### GitHub Pages
- ![](https://docs.astro.build/logos/gitlab.svg)
  ### GitLab Pages
- ![](https://docs.astro.build/logos/google-cloud.svg)
  ### Google Cloud
- ![](https://docs.astro.build/logos/heroku.svg)
  ### Heroku
- ![](https://docs.astro.build/logos/juno.svg)
  ### Juno
- ![](https://docs.astro.build/logos/kinsta.svg)
  ### Kinsta
- ![](https://docs.astro.build/logos/microsoft-azure.svg)
  ### Microsoft Azure
- ![](https://docs.astro.build/logos/netlify.svg)
  ### Netlify
- ![](https://docs.astro.build/logos/railway.svg)
  ### Railway
- ![](https://docs.astro.build/logos/render.svg)
  ### Render
- ![](https://docs.astro.build/logos/seenode.svg)
  ### Seenode
- ![](https://docs.astro.build/logos/stormkit.svg)
  ### Stormkit
- ![](https://docs.astro.build/logos/surge.svg)
  ### Surge
- ![](https://docs.astro.build/logos/vercel.svg)
  ### Vercel
- ![](https://docs.astro.build/logos/zeabur.svg)
  ### Zeabur
- ![](https://docs.astro.build/logos/zephyr.svg)
  ### Zephyr Cloud
- ![](https://docs.astro.build/logos/zerops.svg)
  ### Zerops

   Recipes     [Contribute](https://docs.astro.build/en/contribute/) [Community](https://astro.build/chat) [Sponsor](https://opencollective.com/astrodotbuild)

---

# Deploy your Astro Site

> How to deploy your Astro site to the web.

# Deploy your Astro Site

**Ready to build and deploy your Astro site?** Follow one of our guides to different deployment services or scroll down for general guidance about deploying an Astro site.

## Deployment Guides

[Section titled “Deployment Guides”](#deployment-guides)

- ![](https://docs.astro.build/logos/aws.svg)
  ### AWS
    On demand Static
- ![](https://docs.astro.build/logos/flightcontrol.svg)
  ### AWS via Flightcontrol
    On demand Static
- ![](https://docs.astro.build/logos/sst.svg)
  ### AWS via SST
    On demand Static
- ![](https://docs.astro.build/logos/azion.svg)
  ### Azion
    On demand Static
- ![](https://docs.astro.build/logos/buddy.svg)
  ### Buddy
    Static
- ![](https://docs.astro.build/logos/cleavr.svg)
  ### Cleavr
    On demand Static
- ![](https://docs.astro.build/logos/clever-cloud.svg)
  ### Clever Cloud
    Static On demand
- ![](https://docs.astro.build/logos/cloudflare-pages.svg)
  ### Cloudflare
    On demand Static
- ![](https://docs.astro.build/logos/cloudray.svg)
  ### CloudRay
    Static
- ![](https://docs.astro.build/logos/deno.svg)
  ### Deno Deploy
    On demand Static
- ![](https://docs.astro.build/logos/deployhq.svg)
  ### DeployHQ
    Static
- ![](https://docs.astro.build/logos/edgeone-pages.svg)
  ### EdgeOne Pages
    On demand Static
- ![](https://docs.astro.build/logos/firebase.svg)
  ### Firebase
    On demand Static
- ![](https://docs.astro.build/logos/fleek.svg)
  ### Fleek
    Static
- ![](https://docs.astro.build/logos/flyio.svg)
  ### Fly.io
    On demand Static
- ![](https://docs.astro.build/logos/github.svg)
  ### GitHub Pages
    Static
- ![](https://docs.astro.build/logos/gitlab.svg)
  ### GitLab Pages
    Static
- ![](https://docs.astro.build/logos/google-cloud.svg)
  ### Google Cloud
    On demand Static
- ![](https://docs.astro.build/logos/heroku.svg)
  ### Heroku
    Static
- ![](https://docs.astro.build/logos/juno.svg)
  ### Juno
    Static
- ![](https://docs.astro.build/logos/kinsta.svg)
  ### Kinsta
    On demand Static
- ![](https://docs.astro.build/logos/microsoft-azure.svg)
  ### Microsoft Azure
    Static
- ![](https://docs.astro.build/logos/netlify.svg)
  ### Netlify
    On demand Static
- ![](https://docs.astro.build/logos/railway.svg)
  ### Railway
    On demand Static
- ![](https://docs.astro.build/logos/render.svg)
  ### Render
    Static
- ![](https://docs.astro.build/logos/seenode.svg)
  ### Seenode
    On demand
- ![](https://docs.astro.build/logos/stormkit.svg)
  ### Stormkit
    Static
- ![](https://docs.astro.build/logos/surge.svg)
  ### Surge
    Static
- ![](https://docs.astro.build/logos/vercel.svg)
  ### Vercel
    On demand Static
- ![](https://docs.astro.build/logos/zeabur.svg)
  ### Zeabur
    On demand Static
- ![](https://docs.astro.build/logos/zephyr.svg)
  ### Zephyr Cloud
    Static
- ![](https://docs.astro.build/logos/zerops.svg)
  ### Zerops
    On demand Static

## Quick Deploy Options

[Section titled “Quick Deploy Options”](#quick-deploy-options)

You can build and deploy an Astro site to a number of hosts quickly using either their website’s dashboard UI or a CLI.

### Website UI

[Section titled “Website UI”](#website-ui)

A quick way to deploy your website is to connect your Astro project’s online Git repository (e.g. GitHub, GitLab, Bitbucket) to a host provider and take advantage of continuous deployment using Git.

These host platforms automatically detect pushes to your Astro project’s source repository, build your site and deploy it to the web at a custom URL or your personal domain. Often, setting up a deployment on these platforms will follow steps something like the following:

1. Add your repository to an online Git provider (e.g. in GitHub, GitLab, Bitbucket)
2. Choose a host that supports **continuous deployment** (e.g. [Netlify](https://docs.astro.build/en/guides/deploy/netlify/) or [Vercel](https://docs.astro.build/en/guides/deploy/vercel/)) and import your Git repository as a new site/project.
  Many common hosts will recognize your project as an Astro site, and should choose the appropriate configuration settings to build and deploy your site as shown below. (If not, these settings can be changed.)
3. Click “Deploy” and your new website will be created at a unique URL for that host (e.g. `new-astro-site.netlify.app`).

The host will be automatically configured to watch your Git provider’s main branch for changes, and to rebuild and republish your site at each new commit. These settings can typically be configured in your host provider’s dashboard UI.

### CLI Deployment

[Section titled “CLI Deployment”](#cli-deployment)

Some hosts will have their own command line interface (CLI) you can install globally to your machine using npm. Often, using a CLI to deploy looks something like the following:

1. Install your host’s CLI globally, for example:
  - [npm](#tab-panel-2879)
  - [pnpm](#tab-panel-2880)
  - [Yarn](#tab-panel-2881)
     Terminal window
  ```
  npm install --global netlify-cli
  ```
     Terminal window
  ```
  pnpm add --global netlify-cli
  ```
     Terminal window
  ```
  yarn global add netlify-cli
  ```
2. Run the CLI and follow any instructions for authorization, setup etc.
3. Build your site and deploy to your host
  Many common hosts will build and deploy your site for you. They will usually recognize your project as an Astro site, and should choose the appropriate configuration settings to build and deploy as shown below. (If not, these settings can be changed.)
  Other hosts will require you to [build your site locally](#building-your-site-locally) and deploy using the command line.

## Building Your Site Locally

[Section titled “Building Your Site Locally”](#building-your-site-locally)

Many hosts like Netlify and Vercel will build your site for you and then publish that build output to the web. But, some sites will require you to build locally and then run a deploy command or upload your build output.

You may also wish to build locally to preview your site, or to catch any potential errors and warnings in your own environment.

Run the command `npm run build` to build your Astro site.

- [npm](#tab-panel-2882)
- [pnpm](#tab-panel-2883)
- [Yarn](#tab-panel-2884)

   Terminal window

```
npm run build
```

   Terminal window

```
pnpm run build
```

   Terminal window

```
yarn run build
```

By default, the build output will be placed at `dist/`. This location can be changed using the [outDirconfiguration option](https://docs.astro.build/en/reference/configuration-reference/#outdir).

## Adding an Adapter for on-demand rendering

[Section titled “Adding an Adapter for on-demand rendering”](#adding-an-adapter-for-on-demand-rendering)  Recipes     [Contribute](https://docs.astro.build/en/contribute/) [Community](https://astro.build/chat) [Sponsor](https://opencollective.com/astrodotbuild)

---

# Dev toolbar

> A guide to using the dev toolbar in Astro

# Dev toolbar

While the dev server is running, Astro includes a dev toolbar at the bottom of every page in your local browser preview.

This toolbar includes a number of useful tools for debugging and inspecting your site during development and can be [extended with more dev toolbar apps](#extending-the-dev-toolbar) found in the integrations directory. You can even [build your own toolbar apps](https://docs.astro.build/en/recipes/making-toolbar-apps/) using the [Dev Toolbar API](https://docs.astro.build/en/reference/dev-toolbar-app-reference/)!

This toolbar is enabled by default and appears when you hover over the bottom of the page. It is a development tool only and will not appear on your published site.

## Built-in apps

[Section titled “Built-in apps”](#built-in-apps)

### Astro Menu

[Section titled “Astro Menu”](#astro-menu)

The Astro Menu app provides easy access to various information about the current project and links to extra resources. Notably, it provides one-click access to the Astro documentation, GitHub repository, and Discord server.

This app also includes a “Copy debug info” button which will run the [astro info](https://docs.astro.build/en/reference/cli-reference/#astro-info) command and copy the output to your clipboard. This can be useful when asking for help or reporting issues.

### Inspect

[Section titled “Inspect”](#inspect)

The Inspect app provides information about any [islands](https://docs.astro.build/en/concepts/islands/) on the current page. This will show you the properties passed to each island, and the client directive that is being used to render them.

### Audit

[Section titled “Audit”](#audit)

The Audit app automatically runs a series of audits on the current page, checking for the most common performance and accessibility issues. When an issue is found, a red dot will appear in the toolbar. Clicking on the app will pop up a list of results from the audit and will highlight the related elements directly in the page.

### Settings

[Section titled “Settings”](#settings)

The Settings app allows you to configure options for the dev toolbar, such as verbose logging, disabling notifications, and adjusting its placement on your screen.

## Extending the dev toolbar

[Section titled “Extending the dev toolbar”](#extending-the-dev-toolbar)

Astro integrations can add new apps to the dev toolbar, allowing you to extend it with custom tools that are specific to your project. You can find [more dev tool apps to install in the integrations directory](https://astro.build/integrations/?search=&categories%5B%5D=toolbar) or using the [Astro Menu](#astro-menu).

Install additional dev toolbar app integrations in your project just like any other [Astro integration](https://docs.astro.build/en/guides/integrations-guide/) according to its own installation instructions.

   ![](https://docs.astro.build/houston_chef.webp) **Related recipe:** [Create a dev toolbar app](https://docs.astro.build/en/recipes/making-toolbar-apps/)

## Disabling the dev toolbar

[Section titled “Disabling the dev toolbar”](#disabling-the-dev-toolbar)

The dev toolbar is enabled by default for every site. You can choose to disable it for individual projects and/or users as needed.

### Per-project

[Section titled “Per-project”](#per-project)

To disable the dev toolbar for everyone working on a project, set `devToolbar: false` in the [Astro config file](https://docs.astro.build/en/reference/configuration-reference/#devtoolbarenabled).

 astro.config.mjs

```
import { defineConfig } from "astro/config";
export default defineConfig({  devToolbar: {    enabled: false  }});
```

To enable the dev toolbar again, remove these lines from your configuration, or set `enabled: true`.

### Per-user

[Section titled “Per-user”](#per-user)

To disable the dev toolbar for yourself on a specific project, run the [astro preferences](https://docs.astro.build/en/reference/cli-reference/#astro-preferences) command.

 Terminal window

```
astro preferences disable devToolbar
```

To disable the dev toolbar in all Astro projects for a user on the current machine, add the `--global` flag when running `astro-preferences`:

 Terminal window

```
astro preferences disable --global devToolbar
```

The dev toolbar can later be enabled with:

 Terminal window

```
astro preferences enable devToolbar
```

 Learn     [Contribute](https://docs.astro.build/en/contribute/) [Community](https://astro.build/chat) [Sponsor](https://opencollective.com/astrodotbuild)

---

# E

> An introduction to adding e-commerce options to your Astro site

# E-commerce

With Astro, you can build several e-commerce options, from checkout links to hosted payment pages to building an entire storefront using a payment service API.

## Payment processing overlays

[Section titled “Payment processing overlays”](#payment-processing-overlays)

Some payment processing services (e.g. [Lemon Squeezy](#lemon-squeezy), [Paddle](#paddle)) add a payment form to allow your customer to purchase from your site. These can be hosted overlays or embedded in a page on your site. These may offer some basic customization or site branding, and may be added to your Astro project as scripts, buttons, or external links.

### Lemon Squeezy

[Section titled “Lemon Squeezy”](#lemon-squeezy)

[Lemon Squeezy](https://www.lemonsqueezy.com/) is an all-in-one platform for payments and subscriptions with multi-currency support, global tax compliance, PayPal integration and more. It allows you to create and manage digital products and services through your account dashboard and provides product URLs for the checkout process.

The basic [Lemon.js JavaScript library](https://docs.lemonsqueezy.com/help/lemonjs/what-is-lemonjs) allows you to sell your Lemon Squeezy products with a checkout link.

#### Basic Usage

[Section titled “Basic Usage”](#basic-usage)

The following is an example of adding a Lemon Squeezy “Buy now” element to an Astro page. Clicking this link will open a checkout and allow the visitor to complete a single purchase.

1. Add the following `<script>` tag to your page `head` or `body`:
   src/pages/my-product-page.astro
  ```
  <script src="https://app.lemonsqueezy.com/js/lemon.js" defer></script>
  ```
2. Create an anchor tag on the page linking to your product URL. Include the class `lemonsqueezy-button` to open a checkout overlay when clicked.
   src/pages/my-product-page.astro
  ```
  <a class="lemonsqueezy-button" href="https://demo.lemonsqueezy.com/checkout/...">  Buy Now</a>
  ```

#### Lemon.js

[Section titled “Lemon.js”](#lemonjs)

Lemon.js also provides additional behavior such as [programmatically opening overlays](https://docs.lemonsqueezy.com/help/lemonjs/opening-overlays) and [handling overlay events](https://docs.lemonsqueezy.com/help/lemonjs/handling-events).

    Read the [Lemon Squeezy developer getting started guide](https://docs.lemonsqueezy.com/guides/developer-guide) for more information.

### Paddle

[Section titled “Paddle”](#paddle)

[Paddle](https://www.paddle.com/) is a billing solution for digital products and services. It handles payments, taxes, and subscription management through an overlay or inline checkout.

[Paddle.js](https://developer.paddle.com/paddlejs/overview) is a lightweight JavaScript library that lets you build rich, integrated subscription billing experiences using Paddle.

#### Basic Usage

[Section titled “Basic Usage”](#basic-usage-1)

The following is an example of adding a Paddle “Buy Now” element to an Astro page. Clicking this link will open a checkout and allow the visitor to complete a single purchase.

After your default payment link domain (your own website) is approved by Paddle, you can turn any element on your page into a trigger for a checkout overlay using HTML data attributes.

1. Add the following two `<script>` tags to your page `head` or `body`:
   src/pages/my-product-page.astro
  ```
  <script src="https://cdn.paddle.com/paddle/v2/paddle.js"></script><script type="text/javascript">  Paddle.Setup({    token: '7d279f61a3499fed520f7cd8c08' // replace with a client-side token  });</script>
  ```
2. Turn any element on your page into a Paddle Checkout button by adding the `paddle_button` class:
   src/pages/my-product-page.astro
  ```
  <a href="#" class="paddle_button">Buy Now</a>
  ```
3. Add a `data-items` attribute to specify your product’s Paddle `priceId` and `quantity`. You can also optionally pass additional [supported HTML data attributes](https://developer.paddle.com/paddlejs/html-data-attributes) to prefill data, handle checkout success, or style your button and checkout overlay:
   src/pages/my-product-page.astro
  ```
  <a  href="#"  class="paddle_button"  data-display-mode="overlay"  data-theme="light"  data-locale="en"  data-success-url="https://example.com/thankyou"  data-items='[    {      "priceId": "pri_01gs59hve0hrz6nyybj56z04eq",      "quantity": 1    }  ]'>  Buy now</a>
  ```

#### Paddle.js

[Section titled “Paddle.js”](#paddlejs)

Instead of passing HTML data attributes, you can send data to the checkout overlay using JavaScript for passing multiple attributes and even greater customization. You can also create upgrade workflows using an inline checkout.

   Read more about [using Paddle.js to build an inline checkout](https://developer.paddle.com/build/checkout/build-branded-inline-checkout).

## Full-featured e-commerce solutions

[Section titled “Full-featured e-commerce solutions”](#full-featured-e-commerce-solutions)

For more customization over your site’s shopping cart and checkout process, you can connect a more fully-featured financial service provider (e.g. [Snipcart](#snipcart)) to your Astro project. These e-commerce platforms may also integrate with other third-party services for user account management, personalization, inventory and analytics.

### Snipcart

[Section titled “Snipcart”](#snipcart)

[Snipcart](https://snipcart.com/) is a powerful, developer-first HTML/JavaScript shopping cart platform.

Snipcart also allows you to integrate with third-party services such as shipping providers, enable webhooks for an advanced e-commerce integration between your shopping cart and other systems, choose from several payment gateways (e.g. Stripe, Paypal, and Square), customize email templates, and even provides live testing environments.

#### Basic Usage

[Section titled “Basic Usage”](#basic-usage-2)

The following is an example of configuring a Snipcart checkout and adding button elements for “Add to cart” and “Check out now” to an Astro page. This will allow your visitors to add products to a cart without being immediately sent to a checkout page.

   For complete instructions, including setting up your Snipcart store, please see [the Snipcart installation documentation](https://docs.snipcart.com/v3/setup/installation).

1. Add the script [as shown in the Snipcart installation instructions](https://docs.snipcart.com/v3/setup/installation) on your page after the `<body>` element.
   src/pages/my-product-page.astro
  ```
  <body></body><script>  window.SnipcartSettings = {    publicApiKey: "YOUR_API_KEY",    loadStrategy: "on-user-interaction",  };
    (function()...); // available from the Snipcart documentation</script>
  ```
2. Customize `window.SnipcartSettings` with any of the [available Snipcart settings](https://docs.snipcart.com/v3/setup/installation#settings) to control the behavior and appearance of your cart.
   src/pages/my-product-page.astro
  ```
  <script>  window.SnipcartSettings = {    publicApiKey: "YOUR_API_KEY",    loadStrategy: "manual",    version: "3.7.1",    addProductBehavior: "none",    modalStyle: "side",  };
    (function()...); // available from the Snipcart documentation</script>
  ```
3. Add `class="snipcart-add-item"` to any HTML element, such as a `<button>`, to add an item to the cart when clicked on. Also include any other data elements for [common Snipcart product attributes](https://docs.snipcart.com/v3/setup/products) such as price and description, and any optional fields.
   src/pages/my-product-page.astro
  ```
  <button  class="snipcart-add-item"  data-item-id="astro-print"  data-item-price="39.99"  data-item-description="A framed print of the Astro logo."  data-item-image="/assets/images/astro-print.jpg"  data-item-name="Astro Print"  data-item-custom1-name="Frame color"  data-item-custom1-options="Brown|Silver[+10.00]|Gold[+20.00]"  data-item-custom2-name="Delivery instructions"  data-item-custom2-type="textarea">  Add to cart</button>
  ```
4. Add a Snipcart checkout button with the `snipcart-checkout` class to open the cart and allow guests to complete their purchase with a checkout modal.
   src/pages/my-product-page.astro
  ```
  <button class="snipcart-checkout">Click here to checkout</button>
  ```

#### Snipcart JavaScript SDK

[Section titled “Snipcart JavaScript SDK”](#snipcart-javascript-sdk)

The [Snipcart JavaScript SDK](https://docs.snipcart.com/v3/sdk/basics) lets you configure, customize and manage your Snipcart cart programmatically.

This allows you to perform actions such as:

- Retrieve relevant information about the current Snipcart session and apply certain operations to the cart.
- Listen to incoming events and trigger callbacks dynamically.
- Listen to state changes and receive a full snapshot of the state of the cart.

   See the [Snipcart documentation](https://docs.snipcart.com/v3/) for more information about all the options to integrate Snipcart with your Astro Project.

#### astro-snipcart

[Section titled “astro-snipcart”](#astro-snipcart)

There are two `astro-snipcart` community packages that can simplify using Snipcart.

- [@lloydjatkinson/astro-snipcartAstro template](https://astro-snipcart.vercel.app/): This Astro template includes an optional design system for a complete e-commerce solution out of the box. Learn more on its own extensive documentation site, including [the motivation behind buildingastro-snipcart](https://astro-snipcart.vercel.app/motivation) as providing a convenient, Astro-native way for you to interact with the Snipcart API.
- [@Adammatthiesen/astro-snipcartintegration](https://github.com/Adammatthiesen/astro-snipcart): This integration was heavily inspired by the `astro-snipcart` theme and provides Astro components (or Vue components) that you can add to your existing Astro project for creating products, controlling the cart, and more. See the [full tutorial](https://matthiesen.xyz/blog/getting-started-with-my-astro-snipcart-addon) for more information.

## Community Resources

[Section titled “Community Resources”](#community-resources)

- [Hands-On Experience: eCommerce Store with Astro?](https://crystallize.com/blog/building-ecommerce-with-astro)
- [Collecting Payments with Stripe using Astro](https://zellwk.com/blog/stripe-astro-recipe/)

 Learn     [Contribute](https://docs.astro.build/en/contribute/) [Community](https://astro.build/chat) [Sponsor](https://opencollective.com/astrodotbuild)

---

# Endpoints

> Learn how to create endpoints that serve any kind of data

# Endpoints

Astro lets you create custom endpoints to serve any kind of data. You can use this to generate images, expose an RSS document, or use them as API Routes to build a full API for your site.

In statically-generated sites, your custom endpoints are called at build time to produce static files. If you opt in to [SSR](https://docs.astro.build/en/guides/on-demand-rendering/) mode, custom endpoints turn into live server endpoints that are called on request. Static and SSR endpoints are defined similarly, but SSR endpoints support additional features.

## Static File Endpoints

[Section titled “Static File Endpoints”](#static-file-endpoints)

To create a custom endpoint, add a `.js` or `.ts` file to the `/pages` directory. The `.js` or `.ts` extension will be removed during the build process, so the name of the file should include the extension of the data you want to create. For example, `src/pages/data.json.ts` will build a `/data.json` endpoint.

Endpoints export a `GET` function (optionally `async`) that receives a [context object](https://docs.astro.build/en/reference/api-reference/) with properties similar to the `Astro` global. Here, it returns a [Response](https://developer.mozilla.org/en-US/docs/Web/API/Response) object with a `name` and `url`, and Astro will call this at build time and use the contents of the body to generate the file.

 src/pages/builtwith.json.ts

```
// Outputs: /builtwith.jsonexport function GET({ params, request }) {  return new Response(    JSON.stringify({      name: "Astro",      url: "https://astro.build/",    }),  );}
```

Since Astro v3.0, the returned `Response` object doesn’t have to include the `encoding` property anymore. For example, to produce a binary `.png` image:

 src/pages/astro-logo.png.ts

```
export async function GET({ params, request }) {  const response = await fetch(    "https://docs.astro.build/assets/full-logo-light.png",  );
  return new Response(await response.arrayBuffer());}
```

You can also get type safety in your endpoint functions using the `APIRoute` type with the `satisfies` operator:

```
import type { APIRoute } from "astro";
export const GET = (async ({ params, request }) => { /* ... */ }) satisfies APIRoute;
```

### paramsand Dynamic routing

[Section titled “params and Dynamic routing”](#params-and-dynamic-routing)

Endpoints support the same [dynamic routing](https://docs.astro.build/en/guides/routing/#dynamic-routes) features that pages do. Name your file with a bracketed parameter name and export a [getStaticPaths()function](https://docs.astro.build/en/reference/routing-reference/#getstaticpaths). Then, you can access the parameter using the `params` property passed to the endpoint function:

 src/pages/api/[id].json.ts

```
import type { APIRoute } from "astro";
const usernames = ["Sarah", "Chris", "Yan", "Elian"];
export const GET = (({ params, request }) => {  const id = params.id;
  return new Response(    JSON.stringify({      name: usernames[id],    }),  );}) satisfies APIRoute;
export function getStaticPaths() {  return [    { params: { id: "0" } },    { params: { id: "1" } },    { params: { id: "2" } },    { params: { id: "3" } },  ];}
```

This will generate four JSON endpoints at build time: `/api/0.json`, `/api/1.json`, `/api/2.json` and `/api/3.json`. Dynamic routing with endpoints works the same as it does with pages. In static mode, you can [pass props to the endpoint usinggetStaticPaths()](https://docs.astro.build/en/reference/routing-reference/#data-passing-with-props). However, with on-demand rendering, since the endpoint is a function and not a component, passing props is not supported.

### request

[Section titled “request”](#request)

All endpoints receive a `request` property, but in static mode, you only have access to `request.url`. This returns the full URL of the current endpoint and works the same as [Astro.request.url](https://docs.astro.build/en/reference/api-reference/#request) does for pages.

 src/pages/request-path.json.ts

```
import type { APIRoute } from "astro";
export const GET = (({ params, request }) => {  return new Response(    JSON.stringify({      path: new URL(request.url).pathname,    }),  );}) satisfies APIRoute;
```

## Server Endpoints (API Routes)

[Section titled “Server Endpoints (API Routes)”](#server-endpoints-api-routes)

Everything described in the static file endpoints section can also be used in SSR mode: files can export a `GET` function which receives a [context object](https://docs.astro.build/en/reference/api-reference/) with properties similar to the `Astro` global.

But, unlike in `static` mode, when you enable on-demand rendering for a route, the endpoint will be built when it is requested. This unlocks new features that are unavailable at build time, and allows you to build API routes that listen for requests and securely execute code on the server at runtime.

Your routes will be rendered on demand by default in `server` mode. In `static` mode, you must opt out of prerendering for each custom endpoint with `export const prerender = false`.

   ![](https://docs.astro.build/houston_chef.webp) **Related recipe:** [Call endpoints from the server](https://docs.astro.build/en/recipes/call-endpoints/)

Server endpoints can access `params` without exporting `getStaticPaths`, and they can return a `Response` object, allowing you to set status codes and headers:

 src/pages/[id].json.js

```
import { getProduct } from "../db";
export async function GET({ params }) {  const id = params.id;  const product = await getProduct(id);
  if (!product) {    return new Response(null, {      status: 404,      statusText: "Not found",    });  }
  return new Response(JSON.stringify(product), {    status: 200,    headers: {      "Content-Type": "application/json",    },  });}
```

This will respond to any request that matches the dynamic route. For example, if we navigate to `/helmet.json`, `params.id` will be set to `helmet`. If `helmet` exists in the mock product database, the endpoint will use a `Response` object to respond with JSON and return a successful [HTTP status code](https://developer.mozilla.org/en-US/docs/Web/API/Response/status). If not, it will use a `Response` object to respond with a `404`.

In SSR mode, certain providers require the `Content-Type` header to return an image. In this case, use a `Response` object to specify a `headers` property. For example, to produce a binary `.png` image:

 src/pages/astro-logo.png.ts

```
export async function GET({ params, request }) {  const response = await fetch(    "https://docs.astro.build/assets/full-logo-light.png",  );  const buffer = Buffer.from(await response.arrayBuffer());
  return new Response(buffer, {    headers: { "Content-Type": "image/png" },  });}
```

### HTTP methods

[Section titled “HTTP methods”](#http-methods)

In addition to the `GET` function, you can export a function with the name of any [HTTP method](https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods). When a request comes in, Astro will check the method and call the corresponding function.

You can also export an `ALL` function to match any method that doesn’t have a corresponding exported function. If there is a request with no matching method, it will redirect to your site’s [404 page](https://docs.astro.build/en/basics/astro-pages/#custom-404-error-page).

 src/pages/methods.json.ts

```
export const GET = (({ params, request }) => {  return new Response(    JSON.stringify({      message: "This was a GET!",    }),  );}) satisfies APIRoute;
export const POST = (({ request }) => {  return new Response(    JSON.stringify({      message: "This was a POST!",    }),  );}) satisfies APIRoute;
export const DELETE = (({ request }) => {  return new Response(    JSON.stringify({      message: "This was a DELETE!",    }),  );}) satisfies APIRoute;
export const ALL = (({ request }) => {  return new Response(    JSON.stringify({      message: `This was a ${request.method}!`,    }),  );}) satisfies APIRoute;
```

If you define a `GET` function but no `HEAD` function, Astro will automatically handle `HEAD` requests by calling the `GET` function and stripping the body from the response.

   ![](https://docs.astro.build/houston_chef.webp) **Related recipes**

- [Verify a Captcha](https://docs.astro.build/en/recipes/captcha/)
- [Build forms with API routes](https://docs.astro.build/en/recipes/build-forms-api/)

### request

[Section titled “request”](#request-1)

In SSR mode, the `request` property returns a fully usable [Request](https://developer.mozilla.org/en-US/docs/Web/API/Request) object that refers to the current request. This allows you to accept data and check headers:

 src/pages/test-post.json.ts

```
export const POST = (async ({ request }) => {  if (request.headers.get("Content-Type") === "application/json") {    const body = await request.json();    const name = body.name;
    return new Response(      JSON.stringify({        message: "Your name was: " + name,      }),      {        status: 200,      },    );  }
  return new Response(null, { status: 400 });}) satisfies APIRoute;
```

### Redirects

[Section titled “Redirects”](#redirects)

The endpoint context exports a `redirect()` utility similar to `Astro.redirect`:

 src/pages/links/[id].js

```
import { getLinkUrl } from "../db";
export async function GET({ params, redirect }) {  const { id } = params;  const link = await getLinkUrl(id);
  if (!link) {    return new Response(null, {      status: 404,      statusText: "Not found",    });  }
  return redirect(link, 307);}
```

 Learn     [Contribute](https://docs.astro.build/en/contribute/) [Community](https://astro.build/chat) [Sponsor](https://opencollective.com/astrodotbuild)
