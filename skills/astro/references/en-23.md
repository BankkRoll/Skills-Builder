# @astrojs/markdoc and more

# @astrojs/markdoc

> Learn how to use the @astrojs/markdoc integration in your Astro project.

# @astrojs/markdoc

  v0.15.10 [GitHub](https://github.com/withastro/astro/tree/main/packages/integrations/markdoc/) [npm](https://www.npmjs.com/package/@astrojs/markdoc) [Changelog](https://github.com/withastro/astro/tree/main/packages/integrations/markdoc/CHANGELOG.md)

This **Astro integration** enables the usage of [Markdoc](https://markdoc.dev/) to create components, pages, and content collection entries.

## Why Markdoc?

[Section titled ‚ÄúWhy Markdoc?‚Äù](#why-markdoc)

Markdoc allows you to enhance your Markdown with [Astro components](https://docs.astro.build/en/basics/astro-components/). If you have existing content authored in Markdoc, this integration allows you to bring those files to your Astro project using content collections.

## Installation

[Section titled ‚ÄúInstallation‚Äù](#installation)

Astro includes an `astro add` command to automate the setup of official integrations. If you prefer, you can [install integrations manually](#manual-install) instead.

Run one of the following commands in a new terminal window.

- [npm](#tab-panel-2962)
- [pnpm](#tab-panel-2963)
- [Yarn](#tab-panel-2964)

   Terminal window

```
npx astro add markdoc
```

   Terminal window

```
pnpm astro add markdoc
```

   Terminal window

```
yarn astro add markdoc
```

If you run into any issues, [feel free to report them to us on GitHub](https://github.com/withastro/astro/issues) and try the manual installation steps below.

### Manual Install

[Section titled ‚ÄúManual Install‚Äù](#manual-install)

First, install the `@astrojs/markdoc` package:

- [npm](#tab-panel-2965)
- [pnpm](#tab-panel-2966)
- [Yarn](#tab-panel-2967)

   Terminal window

```
npm install @astrojs/markdoc
```

   Terminal window

```
pnpm add @astrojs/markdoc
```

   Terminal window

```
yarn add @astrojs/markdoc
```

Then, apply the integration to your `astro.config.*` file using the `integrations` property:

 astro.config.mjs

```
import { defineConfig } from 'astro/config';import markdoc from '@astrojs/markdoc';export default defineConfig({  // ...  integrations: [markdoc()],});
```

### VS Code Editor Integration

[Section titled ‚ÄúVS Code Editor Integration‚Äù](#vs-code-editor-integration)

If you are using VS Code, there is an official [Markdoc language extension](https://marketplace.visualstudio.com/items?itemName=Stripe.markdoc-language-support) that includes syntax highlighting and autocomplete for configured tags. [See the language server on GitHub](https://github.com/markdoc/language-server.git) for more information.

To set up the extension, create a `markdoc.config.json` file in the project root with following content:

 markdoc.config.json

```
[  {    "id": "my-site",    "path": "src/content",    "schema": {      "path": "markdoc.config.mjs",      "type": "esm",      "property": "default",      "watch": true    }  }]
```

Set `markdoc.config.mjs` as your configuration file with the `schema` object, and define where your Markdoc files are stored using the `path` property. Since Markdoc is specific to content collections, you can use `src/content`.

## Usage

[Section titled ‚ÄúUsage‚Äù](#usage)

Markdoc files can only be used within content collections. Add entries to any content collection using the `.mdoc` extension:

- Directorysrc/
  - Directorycontent/
    - Directorydocs/
      - why-markdoc.mdoc
      - quick-start.mdoc

Then, query your collection using the [Content Collection APIs](https://docs.astro.build/en/guides/content-collections/#querying-collections):

 src/pages/why-markdoc.astro

```
---import { getEntry, render } from 'astro:content';
const entry = await getEntry('docs', 'why-markdoc');const { Content } = await render(entry);---
<h1>{entry.data.title}</h1><Content />
```

   See the [Astro Content Collection docs](https://docs.astro.build/en/guides/content-collections/) for more information.

## Pass Markdoc variables

[Section titled ‚ÄúPass Markdoc variables‚Äù](#pass-markdoc-variables)

You may need to pass [variables](https://markdoc.dev/docs/variables) to your content. This is useful when passing SSR parameters like A/B tests.

Variables can be passed as props via the `Content` component:

 src/pages/why-markdoc.astro

```
---import { getEntry, render } from 'astro:content';
const entry = await getEntry('docs', 'why-markdoc');const { Content } = await render(entry);---
<Content abTestGroup={Astro.params.abTestGroup} />
```

Now, `abTestGroup` is available as a variable in `docs/why-markdoc.mdoc`:

 src/content/docs/why-markdoc.mdoc

```
{% if $abTestGroup === 'image-optimization-lover' %}
Let me tell you about image optimization...
{% /if %}
```

To make a variable global to all Markdoc files, you can use the `variables` attribute from your `markdoc.config.mjs|ts`:

 markdoc.config.mjs

```
import { defineMarkdocConfig } from '@astrojs/markdoc/config';
export default defineMarkdocConfig({  variables: {    environment: process.env.IS_PROD ? 'prod' : 'dev',  },});
```

### Access frontmatter from your Markdoc content

[Section titled ‚ÄúAccess frontmatter from your Markdoc content‚Äù](#access-frontmatter-from-your-markdoc-content)

To access frontmatter, you can pass the entry `data` property as a variable where you render your content:

 src/pages/why-markdoc.astro

```
---import { getEntry, render } from 'astro:content';
const entry = await getEntry('docs', 'why-markdoc');const { Content } = await render(entry);---
<Content frontmatter={entry.data} />
```

This can now be accessed as `$frontmatter` in your Markdoc.

## Render components

[Section titled ‚ÄúRender components‚Äù](#render-components)

`@astrojs/markdoc` offers configuration options to use all of Markdoc‚Äôs features and connect UI components to your content.

### Use Astro components as Markdoc tags

[Section titled ‚ÄúUse Astro components as Markdoc tags‚Äù](#use-astro-components-as-markdoc-tags)

You can configure [Markdoc tags](https://markdoc.dev/docs/tags) that map to `.astro` components. You can add a new tag by creating a `markdoc.config.mjs|ts` file at the root of your project and configuring the `tag` attribute.

This example renders an `Aside` component, and allows a `type` prop to be passed as a string:

 markdoc.config.mjs

```
import { defineMarkdocConfig, component } from '@astrojs/markdoc/config';
export default defineMarkdocConfig({  tags: {    aside: {      render: component('./src/components/Aside.astro'),      attributes: {        // Markdoc requires type defs for each attribute.        // These should mirror the `Props` type of the component        // you are rendering.        // See Markdoc's documentation on defining attributes        // https://markdoc.dev/docs/attributes#defining-attributes        type: { type: String },      },    },  },});
```

This component can now be used in your Markdoc files with the `{% aside %}` tag. Children will be passed to your component‚Äôs default slot:

```
# Welcome to Markdoc üëã
{% aside type="tip" %}
Use tags like this fancy "aside" to add some _flair_ to your docs.
{% /aside %}
```

### Use client-side UI components

[Section titled ‚ÄúUse client-side UI components‚Äù](#use-client-side-ui-components)

Tags and nodes are restricted to `.astro` files. To embed client-side UI components in Markdoc, [use a wrapper.astrocomponent that renders a framework component](https://docs.astro.build/en/guides/framework-components/#nesting-framework-components) with your desired `client:` directive.

This example wraps a React `Aside.tsx` component with a `ClientAside.astro` component:

 src/components/ClientAside.astro

```
---import Aside from './Aside';---
<Aside {...Astro.props} client:load />
```

This Astro component can now be passed to the `render` prop for any [tag](https://markdoc.dev/docs/tags) or [node](https://markdoc.dev/docs/nodes) in your config:

 markdoc.config.mjs

```
import { defineMarkdocConfig, component } from '@astrojs/markdoc/config';
export default defineMarkdocConfig({  tags: {    aside: {      render: component('./src/components/ClientAside.astro'),      attributes: {        type: { type: String },      },    },  },});
```

### Use Astro components from npm packages and TypeScript files

[Section titled ‚ÄúUse Astro components from npm packages and TypeScript files‚Äù](#use-astro-components-from-npm-packages-and-typescript-files)

You may need to use Astro components exposed as named exports from TypeScript or JavaScript files. This is common when using npm packages and design systems.

You can pass the import name as the second argument to the `component()` function:

 markdoc.config.mjs

```
import { defineMarkdocConfig, component } from '@astrojs/markdoc/config';
export default defineMarkdocConfig({  tags: {    tabs: {      render: component('@astrojs/starlight/components', 'Tabs'),    },  },});
```

This generates the following import statement internally:

```
import { Tabs } from '@astrojs/starlight/components';
```

## Markdoc Partials

[Section titled ‚ÄúMarkdoc Partials‚Äù](#markdoc-partials)

The `{% partial /%}` tag allows you to render other `.mdoc` files inside your Markdoc content.

This is useful for reusing content across multiple documents, and allows you to have `.mdoc` content files that do not follow your collection schema.

This example shows a Markdoc partial for a footer to be used inside blog collection entries:

 src/content/blog/_footer.mdoc

```
Social links:
- [Twitter / X](https://twitter.com/astrodotbuild)- [Discord](https://astro.build/chat)- [GitHub](https://github.com/withastro/astro)
```

Use the `{% partial /%}` tag with to render the footer at the bottom of a blog post entry. Apply the `file` attribute with the path to the file, using either a relative path or an import alias:

 src/content/blog/post.mdoc

```
# My Blog Post
{% partial file="./_footer.mdoc" /%}
```

## Syntax highlighting

[Section titled ‚ÄúSyntax highlighting‚Äù](#syntax-highlighting)

`@astrojs/markdoc` provides [Shiki](https://shiki.style) and [Prism](https://github.com/PrismJS) extensions to highlight your code blocks.

### Shiki

[Section titled ‚ÄúShiki‚Äù](#shiki)

Apply the `shiki()` extension to your Markdoc config using the `extends` property. You can optionally pass a shiki configuration object:

 markdoc.config.mjs

```
import { defineMarkdocConfig } from '@astrojs/markdoc/config';import shiki from '@astrojs/markdoc/shiki';
export default defineMarkdocConfig({  extends: [    shiki({      // Choose from Shiki's built-in themes (or add your own)      // Default: 'github-dark'      // https://shiki.style/themes      theme: 'dracula',      // Enable word wrap to prevent horizontal scrolling      // Default: false      wrap: true,      // Pass custom languages      // Note: Shiki has countless langs built-in, including `.astro`!      // https://shiki.style/languages      langs: [],    }),  ],});
```

### Prism

[Section titled ‚ÄúPrism‚Äù](#prism)

Apply the `prism()` extension to your Markdoc config using the `extends` property.

 markdoc.config.mjs

```
import { defineMarkdocConfig } from '@astrojs/markdoc/config';import prism from '@astrojs/markdoc/prism';
export default defineMarkdocConfig({  extends: [prism()],});
```

   To learn about configuring Prism stylesheets, [see our syntax highlighting guide](https://docs.astro.build/en/guides/syntax-highlighting/#add-a-prism-stylesheet).

## Custom Markdoc nodes / elements

[Section titled ‚ÄúCustom Markdoc nodes / elements‚Äù](#custom-markdoc-nodes--elements)

You may want to render standard Markdown elements, such as paragraphs and bolded text, as Astro components. For this, you can configure a [Markdoc node](https://markdoc.dev/docs/nodes). If a given node receives attributes, they will be available as component props.

This example renders blockquotes with a custom `Quote.astro` component:

 markdoc.config.mjs

```
import { defineMarkdocConfig, nodes, component } from '@astrojs/markdoc/config';
export default defineMarkdocConfig({  nodes: {    blockquote: {      ...nodes.blockquote, // Apply Markdoc's defaults for other options      render: component('./src/components/Quote.astro'),    },  },});
```

   See the [Markdoc nodes documentation](https://markdoc.dev/docs/nodes#built-in-nodes) to learn about all the built-in nodes and attributes.

### Custom headings

[Section titled ‚ÄúCustom headings‚Äù](#custom-headings)

`@astrojs/markdoc` automatically adds anchor links to your headings, and [generates a list ofheadingsvia the content collections API](https://docs.astro.build/en/guides/content-collections/#rendering-body-content). To further customize how headings are rendered, you can apply an Astro component [as a Markdoc node](https://markdoc.dev/docs/nodes).

This example renders a `Heading.astro` component using the `render` property:

 markdoc.config.mjs

```
import { defineMarkdocConfig, nodes, component } from '@astrojs/markdoc/config';
export default defineMarkdocConfig({  nodes: {    heading: {      ...nodes.heading, // Preserve default anchor link generation      render: component('./src/components/Heading.astro'),    },  },});
```

All Markdown headings will render the `Heading.astro` component and pass the following `attributes` as component props:

- `level: number` The heading level 1 - 6
- `id: string` An `id` generated from the heading‚Äôs text contents. This corresponds to the `slug` generated by the [contentrender()function](https://docs.astro.build/en/guides/content-collections/#rendering-body-content).

For example, the heading `### Level 3 heading!` will pass `level: 3` and `id: 'level-3-heading'` as component props.

### Custom image components

[Section titled ‚ÄúCustom image components‚Äù](#custom-image-components)

Astro‚Äôs `<Image />` component cannot be used directly in Markdoc. However, you can configure an Astro component to override the default image node every time the native `![]()` image syntax is used, or as a custom Markdoc tag to allow you to specify additional image attributes.

#### Override Markdoc‚Äôs default image node

[Section titled ‚ÄúOverride Markdoc‚Äôs default image node‚Äù](#override-markdocs-default-image-node)

To override the default image node, you can configure an `.astro` component to be rendered in place of a standard `<img>`.

1. Build a custom `MarkdocImage.astro` component to pass the required `src` and `alt` properties from your image to the `<Image />` component:
   src/components/MarkdocImage.astro
  ```
  ---import type { ImageMetadata } from "astro";import { Image } from "astro:assets";interface Props {  src: ImageMetadata;  alt: string;}const { src, alt } = Astro.props;---<Image src={src} alt={alt} />
  ```
2. The `<Image />` component requires a `width` and `height` for remote images which cannot be provided using the `![]()` syntax. To avoid errors when using remote images, update your component to render a standard HTML `<img>` tag when a remote URL `src` is found:
   src/components/MarkdocImage.astro
  ```
  ---import type { ImageMetadata } from "astro";import { Image } from "astro:assets";interface Props {  src: ImageMetadata | string;  alt: string;}const { src, alt } = Astro.props;---<Image src={src} alt={alt} />{  typeof src === 'string' ? <img src={src} alt={alt} /> : <Image src={src} alt={alt} />}
  ```
3. Configure Markdoc to override the default image node and render `MarkdocImage.astro`:
   markdoc.config.mjs
  ```
  import { defineMarkdocConfig, nodes, component } from '@astrojs/markdoc/config';
  export default defineMarkdocConfig({  nodes: {    image: {      ...nodes.image, // Apply Markdoc's defaults for other options      render: component('./src/components/MarkdocImage.astro'),    },  },});
  ```
4. The native image syntax in any `.mdoc` file will now use the `<Image />` component to optimize your local images. Remote images may still be used, but will not be rendered by Astro‚Äôs `<Image />` component.
   src/content/blog/post.mdoc
  ```
  ![A picture of a cat](/cat.jpg)
  ![A picture of a dog](https://example.com/dog.jpg)
  ```

#### Create a custom Markdoc image tag

[Section titled ‚ÄúCreate a custom Markdoc image tag‚Äù](#create-a-custom-markdoc-image-tag)

A Markdoc `image` tag allows you to set additional attributes on your image that are not possible with the `![]()` syntax. For example, custom image tags allow you to use Astro‚Äôs `<Image />` component for remote images that require a `width` and `height`.

The following steps will create a custom Markdoc image tag to display a `<figure>` element with a caption, using the  Astro `<Image />` component to optimize the image.

1. Create a `MarkdocFigure.astro` component to receive the necessary props and render an image with a caption:
   src/components/MarkdocFigure.astro
  ```
  ---import type { ImageMetadata } from "astro";import { Image } from "astro:assets";
  interface Props {  src: ImageMetadata | string;  alt: string;  width: number;  height: number;  caption: string;}
  const { src, alt, width, height, caption } = Astro.props;---<figure>    <Image {src} {alt} {width} {height}  />    {caption && <figcaption>{caption}</figcaption>}</figure>
  ```
2. Configure your custom image tag to render your Astro component:
   markdoc.config.mjs
  ```
  import { component, defineMarkdocConfig, nodes } from '@astrojs/markdoc/config';
  export default defineMarkdocConfig({  tags: {    image: {      attributes: {        width: {          type: String,        },        height: {          type: String,        },        caption: {          type: String,        },        ...nodes.image.attributes      },      render: component('./src/components/MarkdocFigure.astro'),    },  },});
  ```
3. Use the `image` tag in Markdoc files to display a figure with caption, providing all the necessary attributes for your component:
  ```
  {% image src="./astro-logo.png" alt="Astro Logo" width="100" height="100" caption="a caption!" /%}
  ```

## Advanced Markdoc configuration

[Section titled ‚ÄúAdvanced Markdoc configuration‚Äù](#advanced-markdoc-configuration)

The `markdoc.config.mjs|ts` file accepts [all Markdoc configuration options](https://markdoc.dev/docs/config), including [tags](https://markdoc.dev/docs/tags) and [functions](https://markdoc.dev/docs/functions).

You can pass these options from the default export in your `markdoc.config.mjs|ts` file:

 markdoc.config.mjs

```
import { defineMarkdocConfig } from '@astrojs/markdoc/config';
export default defineMarkdocConfig({  functions: {    getCountryEmoji: {      transform(parameters) {        const [country] = Object.values(parameters);        const countryToEmojiMap = {          japan: 'üáØüáµ',          spain: 'üá™üá∏',          france: 'üá´üá∑',        };        return countryToEmojiMap[country] ?? 'üè≥';      },    },  },});
```

Now, you can call this function from any Markdoc content entry:

```
¬°Hola {% getCountryEmoji("spain") %}!
```

   [See the Markdoc documentation](https://markdoc.dev/docs/functions#creating-a-custom-function) for more on using variables or functions in your content.

### Set the root HTML element

[Section titled ‚ÄúSet the root HTML element‚Äù](#set-the-root-html-element)

Markdoc wraps documents with an `<article>` tag by default. This can be changed from the `document` Markdoc node. This accepts an HTML element name or `null` if you prefer to remove the wrapper element:

 markdoc.config.mjs

```
import { defineMarkdocConfig, nodes } from '@astrojs/markdoc/config';
export default defineMarkdocConfig({  nodes: {    document: {      ...nodes.document, // Apply defaults for other options      render: null, // default 'article'    },  },});
```

## Integration config options

[Section titled ‚ÄúIntegration config options‚Äù](#integration-config-options)

The Astro Markdoc integration handles configuring Markdoc options and capabilities that are not available through the `markdoc.config.js` file.

### allowHTML

[Section titled ‚ÄúallowHTML‚Äù](#allowhtml)

**Type:** `boolean`
 **Default:** `false`

 **Added in:** `@astrojs/markdoc@0.4.4`

Enables writing HTML markup alongside Markdoc tags and nodes.

By default, Markdoc will not recognize HTML markup as semantic content.

To achieve a more Markdown-like experience, where HTML elements can be included alongside your content, set `allowHTML:true` as a `markdoc` integration option. This will enable HTML parsing in Markdoc markup.

 astro.config.mjs

```
import { defineConfig } from 'astro/config';  import markdoc from '@astrojs/markdoc';
  export default defineConfig({    // ...    integrations: [markdoc({ allowHTML: true })],  });
```

### ignoreIndentation

[Section titled ‚ÄúignoreIndentation‚Äù](#ignoreindentation)

**Type:** `boolean`
 **Default:** `false`

 **Added in:** `@astrojs/markdoc@0.7.0`

By default, any content that is indented by four spaces is treated as a code block. Unfortunately, this behavior makes it difficult to use arbitrary levels of indentation to improve the readability of documents with complex structure.

When using nested tags in Markdoc, it can be helpful to indent the content inside of tags so that the level of depth is clear. To support arbitrary indentation, we have to disable the indent-based code blocks and modify several other markdown-it parsing rules that account for indent-based code blocks. These changes can be applied by enabling the ignoreIndentation option.

 astro.config.mjs

```
import { defineConfig } from 'astro/config';  import markdoc from '@astrojs/markdoc';
  export default defineConfig({    // ...    integrations: [markdoc({ ignoreIndentation: true })],  });
```

```
# Welcome to Markdoc with indented tags üëã
# Note: Can use either spaces or tabs for indentation
{% custom-tag %}{% custom-tag %} ### Tags can be indented for better readability
    {% another-custom-tag %}      This is easier to follow when there is a lot of nesting    {% /another-custom-tag %}
{% /custom-tag %}{% /custom-tag %}
```

## Examples

[Section titled ‚ÄúExamples‚Äù](#examples)

- The [Astro Markdoc starter template](https://github.com/withastro/astro/tree/latest/examples/with-markdoc) shows how to use Markdoc files in your Astro project.

## More integrations

### Front-end frameworks

- ![](https://docs.astro.build/logos/alpine-js.svg)
  ### @astrojs/alpinejs
- ![](https://docs.astro.build/logos/preact.svg)
  ### @astrojs/preact
- ![](https://docs.astro.build/logos/react.svg)
  ### @astrojs/react
- ![](https://docs.astro.build/logos/solid.svg)
  ### @astrojs/solid‚Å†-‚Å†js
- ![](https://docs.astro.build/logos/svelte.svg)
  ### @astrojs/svelte
- ![](https://docs.astro.build/logos/vue.svg)
  ### @astrojs/vue

### Adapters

- ![](https://docs.astro.build/logos/cloudflare-pages.svg)
  ### @astrojs/cloudflare
- ![](https://docs.astro.build/logos/netlify.svg)
  ### @astrojs/netlify
- ![](https://docs.astro.build/logos/node.svg)
  ### @astrojs/node
- ![](https://docs.astro.build/logos/vercel.svg)
  ### @astrojs/vercel

### Other integrations

- ![](https://docs.astro.build/logos/db.svg)
  ### @astrojs/db
- ![](https://docs.astro.build/logos/markdoc.svg)
  ### @astrojs/markdoc
- ![](https://docs.astro.build/logos/mdx.svg)
  ### @astrojs/mdx
- ![](https://docs.astro.build/logos/partytown.svg)
  ### @astrojs/partytown
- ![](https://docs.astro.build/logos/sitemap.svg)
  ### @astrojs/sitemap

  Learn     [Contribute](https://docs.astro.build/en/contribute/) [Community](https://astro.build/chat) [Sponsor](https://opencollective.com/astrodotbuild)

---

# @astrojs/mdx

> Learn how to use the @astrojs/mdx integration in your Astro project.

# @astrojs/mdx

  v4.3.13 [GitHub](https://github.com/withastro/astro/tree/main/packages/integrations/mdx/) [npm](https://www.npmjs.com/package/@astrojs/mdx) [Changelog](https://github.com/withastro/astro/tree/main/packages/integrations/mdx/CHANGELOG.md)

This **Astro integration** enables the usage of [MDX](https://mdxjs.com/) components and allows you to create pages as `.mdx` files.

## Why MDX?

[Section titled ‚ÄúWhy MDX?‚Äù](#why-mdx)

MDX allows you to use variables, JSX expressions and components within Markdown content in Astro. If you have existing content authored in MDX, this integration allows you to bring those files to your Astro project.

## Installation

[Section titled ‚ÄúInstallation‚Äù](#installation)

Astro includes an `astro add` command to automate the setup of official integrations. If you prefer, you can [install integrations manually](#manual-install) instead.

Run one of the following commands in a new terminal window.

- [npm](#tab-panel-2968)
- [pnpm](#tab-panel-2969)
- [Yarn](#tab-panel-2970)

   Terminal window

```
npx astro add mdx
```

   Terminal window

```
pnpm astro add mdx
```

   Terminal window

```
yarn astro add mdx
```

If you run into any issues, [feel free to report them to us on GitHub](https://github.com/withastro/astro/issues) and try the manual installation steps below.

### Manual Install

[Section titled ‚ÄúManual Install‚Äù](#manual-install)

First, install the `@astrojs/mdx` package:

- [npm](#tab-panel-2971)
- [pnpm](#tab-panel-2972)
- [Yarn](#tab-panel-2973)

   Terminal window

```
npm install @astrojs/mdx
```

   Terminal window

```
pnpm add @astrojs/mdx
```

   Terminal window

```
yarn add @astrojs/mdx
```

Then, apply the integration to your `astro.config.*` file using the `integrations` property:

 astro.config.mjs

```
import { defineConfig } from 'astro/config';import mdx from '@astrojs/mdx';
export default defineConfig({  // ...  integrations: [mdx()],});
```

### Editor Integration

[Section titled ‚ÄúEditor Integration‚Äù](#editor-integration)

For editor support in [VS Code](https://code.visualstudio.com/), install the [official MDX extension](https://marketplace.visualstudio.com/items?itemName=unifiedjs.vscode-mdx).

For other editors, use the [MDX language server](https://github.com/mdx-js/mdx-analyzer/tree/main/packages/language-server).

## Usage

[Section titled ‚ÄúUsage‚Äù](#usage)

Visit the [MDX docs](https://mdxjs.com/docs/what-is-mdx/) to learn about using standard MDX features.

## MDX in Astro

[Section titled ‚ÄúMDX in Astro‚Äù](#mdx-in-astro)

Adding the MDX integration enhances your Markdown authoring with JSX variables, expressions and components.

It also adds extra features to standard MDX, including support for Markdown-style frontmatter in MDX. This allows you to use most of [Astro‚Äôs built-in Markdown features](https://docs.astro.build/en/guides/markdown-content/).

`.mdx` files must be written in [MDX syntax](https://mdxjs.com/docs/what-is-mdx/#mdx-syntax) rather than Astro‚Äôs HTML-like syntax.

### Using MDX with content collections

[Section titled ‚ÄúUsing MDX with content collections‚Äù](#using-mdx-with-content-collections)

To include MDX files in a content collection, make sure that your [collection loader](https://docs.astro.build/en/guides/content-collections/#defining-the-collection-loader) is configured to load content from `.mdx` files:

 src/content.config.ts

```
import { defineCollection } from 'astro:content';import { glob } from 'astro/loaders';import { z } from 'astro/zod';
const blog = defineCollection({  loader: glob({ pattern: "**/*.{md,mdx}", base: "./src/blog" }),  schema: z.object({    title: z.string(),    description: z.string(),    pubDate: z.coerce.date(),  })});
export const collections = { blog };
```

### Using Exported Variables in MDX

[Section titled ‚ÄúUsing Exported Variables in MDX‚Äù](#using-exported-variables-in-mdx)

MDX supports using `export` statements to add variables to your MDX content or to export data to a component that imports it.

For example, you can export a `title` field from an MDX page or component to use as a heading with `{JSX expressions}`:

 /src/blog/posts/post-1.mdx

```
export const title = 'My first MDX post'
# {title}
```

Or you can use that exported `title` in your page using `import` and `import.meta.glob()` statements:

 src/pages/index.astro

```
---const matches = import.meta.glob('./posts/*.mdx', { eager: true });const posts = Object.values(matches);---
{posts.map(post => <p>{post.title}</p>)}
```

#### Exported Properties

[Section titled ‚ÄúExported Properties‚Äù](#exported-properties)

The following properties are available to a `.astro` component when using an `import` statement or `import.meta.glob()`:

- **file** - The absolute file path (e.g. `/home/user/projects/.../file.mdx`).
- **url** - The URL of the page (e.g. `/en/guides/markdown-content`).
- **frontmatter** - Contains any data specified in the file‚Äôs YAML/TOML frontmatter.
- **getHeadings()** - An async function that returns an array of all headings (`<h1>` to `<h6>`) in the file with the type: `{ depth: number; slug: string; text: string }[]`. Each heading‚Äôs `slug` corresponds to the generated ID for a given heading and can be used for anchor links.
- **<Content />** - A component that returns the full, rendered contents of the file.
- **(anyexportvalue)** - MDX files can also export data with an `export` statement.

### Using Frontmatter Variables in MDX

[Section titled ‚ÄúUsing Frontmatter Variables in MDX‚Äù](#using-frontmatter-variables-in-mdx)

The Astro MDX integration includes support for using frontmatter in MDX by default. Add frontmatter properties just as you would in Markdown files, and these variables are available to use in the template, and as named properties when importing the file somewhere else.

 /src/blog/posts/post-1.mdx

```
---title: 'My first MDX post'author: 'Houston'---
# {frontmatter.title}
Written by: {frontmatter.author}
```

### Using Components in MDX

[Section titled ‚ÄúUsing Components in MDX‚Äù](#using-components-in-mdx)

After installing the MDX integration, you can import and use both [Astro components](https://docs.astro.build/en/basics/astro-components/) and [UI framework components](https://docs.astro.build/en/guides/framework-components/#using-framework-components) in MDX (`.mdx`) files just as you would use them in any other Astro component.

Don‚Äôt forget to include a `client:directive` on your UI framework components, if necessary!

See more examples of using import and export statements in the [MDX docs](https://mdxjs.com/docs/what-is-mdx/#esm).

 src/blog/post-1.mdx

```
---title: My first post---import ReactCounter from '../components/ReactCounter.jsx';
I just started my new Astro blog!
Here is my counter component, working in MDX:<ReactCounter client:load />
```

#### Assigning Custom Components to HTML elements

[Section titled ‚ÄúAssigning Custom Components to HTML elements‚Äù](#assigning-custom-components-to-html-elements)

With MDX, you can map Markdown syntax to custom components instead of their standard HTML elements. This allows you to write in standard Markdown syntax, but apply special component styling to selected elements.

For example, you can create a `Blockquote.astro` component to provide custom styling for `<blockquote>` content:

 src/components/Blockquote.astro

```
---const props = Astro.props;---<blockquote {...props} class="bg-blue-50 p-4">  <span class="text-4xl text-blue-600 mb-2">‚Äú</span>  <slot /> </blockquote>
```

Import your custom component into your `.mdx` file, then export a `components` object that maps the standard HTML element to your custom component:

 src/blog/posts/post-1.mdx

```
import Blockquote from '../components/Blockquote.astro';export const components = {blockquote: Blockquote}
> This quote will be a custom Blockquote
```

Visit the [MDX website](https://mdxjs.com/table-of-components/) for a full list of HTML elements that can be overwritten as custom components.

#### Passingcomponentsto MDX content

[Section titled ‚ÄúPassing components to MDX content‚Äù](#passing-components-to-mdx-content)

When rendering imported MDX content with the `<Content />` component, including rendering MDX entries using content collections, custom components can be passed via the `components` prop. These components must first be imported to make them available to the `<Content />` component.

The `components` object maps HTML element names (`h1`, `h2`, `blockquote`, etc.) to your custom components. You can also include [all components exported from the MDX file itself](#assigning-custom-components-to-html-elements) using the spread operator (`...`), which must also be imported from your MDX file as `components`.

If you are importing MDX directly from a single file for use in an Astro component, import both the `Content` component and any exported components from your MDX file.

 src/pages/page.astro

```
---import { Content, components } from '../content.mdx';import Heading from '../Heading.astro';---<Content components={{...components, h1: Heading }} />
```

If your MDX file is a content collections entry, then use the `render()` function from `astro:content` to access the `<Content />` component.

The following example passes a custom heading to the `<Content />` component via the `components` prop to be used in place of all `<h1>` HTML elements:

 src/pages/blog/post-1.astro

```
---import { getEntry, render } from 'astro:content';import CustomHeading from '../../components/CustomHeading.astro';const entry = await getEntry('blog', 'post-1');const { Content } = await render(entry);---<Content components={{ h1: CustomHeading }} />
```

## Configuration

[Section titled ‚ÄúConfiguration‚Äù](#configuration)

Once the MDX integration is installed, no configuration is necessary to use `.mdx` files in your Astro project.

You can configure how your MDX is rendered with the following options:

- [Options inherited from Markdown config](#options-inherited-from-markdown-config)
- [extendMarkdownConfig](#extendmarkdownconfig)
- [recmaPlugins](#recmaplugins)
- [optimize](#optimize)

### Options inherited from Markdown config

[Section titled ‚ÄúOptions inherited from Markdown config‚Äù](#options-inherited-from-markdown-config)

All [markdownconfiguration options](https://docs.astro.build/en/reference/configuration-reference/#markdown-options) can be configured separately in the MDX integration. This includes remark and rehype plugins, syntax highlighting, and more. Options will default to those in your Markdown config ([see theextendMarkdownConfigoption](#extendmarkdownconfig) to modify this).

 astro.config.mjs

```
import { defineConfig } from 'astro/config';import mdx from '@astrojs/mdx';import remarkToc from 'remark-toc';import rehypePresetMinify from 'rehype-preset-minify';
export default defineConfig({  // ...  integrations: [    mdx({      syntaxHighlight: 'shiki',      shikiConfig: { theme: 'dracula' },      remarkPlugins: [remarkToc],      rehypePlugins: [rehypePresetMinify],      remarkRehype: { footnoteLabel: 'Footnotes' },      gfm: false,    }),  ],});
```

    See the [Markdown Options reference](https://docs.astro.build/en/reference/configuration-reference/#markdown-options) for a complete list of options.

### extendMarkdownConfig

[Section titled ‚ÄúextendMarkdownConfig‚Äù](#extendmarkdownconfig)

**Type:** `boolean`
 **Default:** `true`

 **Added in:** `@astrojs/mdx@0.15.0`

MDX will extend [your project‚Äôs existing Markdown configuration](https://docs.astro.build/en/reference/configuration-reference/#markdown-options) by default. To override individual options, you can specify their equivalent in your MDX configuration.

For example, say you need to disable GitHub-Flavored Markdown and apply a different set of remark plugins for MDX files. You can apply these options like so, with `extendMarkdownConfig` enabled by default:

 astro.config.mjs

```
import { defineConfig } from 'astro/config';import mdx from '@astrojs/mdx';
export default defineConfig({  // ...  markdown: {    syntaxHighlight: 'prism',    remarkPlugins: [remarkPlugin1],    gfm: true,  },  integrations: [    mdx({      // `syntaxHighlight` inherited from Markdown
      // Markdown `remarkPlugins` ignored,      // only `remarkPlugin2` applied.      remarkPlugins: [remarkPlugin2],      // `gfm` overridden to `false`      gfm: false,    }),  ],});
```

You may also need to disable `markdown` config extension in MDX. For this, set `extendMarkdownConfig` to `false`:

 astro.config.mjs

```
import { defineConfig } from 'astro/config';import mdx from '@astrojs/mdx';
export default defineConfig({  // ...  markdown: {    remarkPlugins: [remarkPlugin1],  },  integrations: [    mdx({      // Markdown config now ignored      extendMarkdownConfig: false,      // No `remarkPlugins` applied    }),  ],});
```

### recmaPlugins

[Section titled ‚ÄúrecmaPlugins‚Äù](#recmaplugins)

**Type:** `PluggableList`
 **Default:** `[]`

 **Added in:** `@astrojs/mdx@0.11.5`

These are plugins that modify the output [estree](https://github.com/estree/estree) directly. This is useful for modifying or injecting JavaScript variables in your MDX files.

We suggest [using AST Explorer](https://astexplorer.net/) to play with estree outputs, and trying [estree-util-visit](https://unifiedjs.com/explore/package/estree-util-visit/) for searching across JavaScript nodes.

### optimize

[Section titled ‚Äúoptimize‚Äù](#optimize)

**Type:** `boolean | { ignoreElementNames?: string[] }`
 **Default:** `false`

 **Added in:** `@astrojs/mdx@0.19.5`

This is an optional configuration setting to optimize the MDX output for faster builds and rendering via an internal rehype plugin. This may be useful if you have many MDX files and notice slow builds. However, this option may generate some unescaped HTML, so make sure your site‚Äôs interactive parts still work correctly after enabling it.

This is disabled by default. To enable MDX optimization, add the following to your MDX integration configuration:

 astro.config.mjs

```
import { defineConfig } from 'astro/config';import mdx from '@astrojs/mdx';
export default defineConfig({  // ...  integrations: [    mdx({      optimize: true,    }),  ],});
```

#### ignoreElementNames

[Section titled ‚ÄúignoreElementNames‚Äù](#ignoreelementnames)

**Type:** `string[]`

 **Added in:** `@astrojs/mdx@3.0.0`

Previously known as `customComponentNames`.

An optional property of `optimize` to prevent the MDX optimizer from handling certain element names, like [custom components passed to imported MDX content via the components prop](#passing-components-to-mdx-content).

You will need to exclude these components from optimization as the optimizer eagerly converts content into a static string, which will break custom components that needs to be dynamically rendered.

For example, the intended MDX output of the following is `<Heading>...</Heading>` in place of every `"<h1>...</h1>"`:

```
---import { Content, components } from '../content.mdx';import Heading from '../Heading.astro';---
<Content components={{ ...components, h1: Heading }} />
```

To configure optimization for this using the `ignoreElementNames` property, specify an array of HTML element names that should be treated as custom components:

 astro.config.mjs

```
import { defineConfig } from 'astro/config';import mdx from '@astrojs/mdx';
export default defineConfig({  // ...  integrations: [    mdx({      optimize: {        // Prevent the optimizer from handling `h1` elements        ignoreElementNames: ['h1'],      },    }),  ],});
```

Note that if your MDX file [configures custom components usingexport const components = { ... }](https://docs.astro.build/en/guides/integrations-guide/mdx/#assigning-custom-components-to-html-elements), then you do not need to manually configure this option. The optimizer will automatically detect them.

## Examples

[Section titled ‚ÄúExamples‚Äù](#examples)

- The [Astro MDX starter template](https://github.com/withastro/astro/tree/latest/examples/with-mdx) shows how to use MDX files in your Astro project.

## More integrations

### Front-end frameworks

- ![](https://docs.astro.build/logos/alpine-js.svg)
  ### @astrojs/alpinejs
- ![](https://docs.astro.build/logos/preact.svg)
  ### @astrojs/preact
- ![](https://docs.astro.build/logos/react.svg)
  ### @astrojs/react
- ![](https://docs.astro.build/logos/solid.svg)
  ### @astrojs/solid‚Å†-‚Å†js
- ![](https://docs.astro.build/logos/svelte.svg)
  ### @astrojs/svelte
- ![](https://docs.astro.build/logos/vue.svg)
  ### @astrojs/vue

### Adapters

- ![](https://docs.astro.build/logos/cloudflare-pages.svg)
  ### @astrojs/cloudflare
- ![](https://docs.astro.build/logos/netlify.svg)
  ### @astrojs/netlify
- ![](https://docs.astro.build/logos/node.svg)
  ### @astrojs/node
- ![](https://docs.astro.build/logos/vercel.svg)
  ### @astrojs/vercel

### Other integrations

- ![](https://docs.astro.build/logos/db.svg)
  ### @astrojs/db
- ![](https://docs.astro.build/logos/markdoc.svg)
  ### @astrojs/markdoc
- ![](https://docs.astro.build/logos/mdx.svg)
  ### @astrojs/mdx
- ![](https://docs.astro.build/logos/partytown.svg)
  ### @astrojs/partytown
- ![](https://docs.astro.build/logos/sitemap.svg)
  ### @astrojs/sitemap

  Learn     [Contribute](https://docs.astro.build/en/contribute/) [Community](https://astro.build/chat) [Sponsor](https://opencollective.com/astrodotbuild)
