# Docker Desktop in Microsoft Dev Box and more

# Docker Desktop in Microsoft Dev Box

> Learn about the benefits of and  how to setup Docker Desktop in Microsoft Dev Box

# Docker Desktop in Microsoft Dev Box

   Table of contents

---

Docker Desktop is available as a pre-configured image in the Microsoft Azure Marketplace for use with Microsoft Dev Box, allowing developers to quickly set up consistent development environments in the cloud.

Microsoft Dev Box provides cloud-based, pre-configured developer workstations that allow you to code, build, and test applications without configuring a local development environment. The Docker Desktop image for Microsoft Dev Box comes with Docker Desktop and its dependencies pre-installed, giving you a ready-to-use containerized development environment.

## Key benefits

- Pre-configured environment: Docker Desktop, WSL2, and other requirements come pre-installed and configured
- Consistent development: Ensure all team members work with the same Docker environment
- Powerful resources: Access more compute power and storage than might be available on local machines
- State persistence: Dev Box maintains your state between sessions, similar to hibernating a local machine
- Seamless licensing: Use your existing Docker subscription or purchase a new one directly through Azure Marketplace

## Setup

### Prerequisites

- An Azure subscription
- Access to Microsoft Dev Box
- A Docker subscription (Pro, Team, or Business). You can use Docker Desktop in Microsoft Dev Box with any of the following subscription options:
  - An existing or new Docker subscription
  - A new Docker subscription purchased through Azure Marketplace
  - A Docker Business subscription with SSO configured for your organization

### Set up Docker Desktop in Dev Box

1. Navigate to the [Docker Desktop for Microsoft Dev Box](https://azuremarketplace.microsoft.com/en-us/marketplace/apps/dockerinc1694120899427.devbox_azuremachine?tab=Overview) listing in Azure Marketplace.
2. Select **Get It Now** to add the virtual machine image to your subscription.
3. Follow the Azure workflow to complete the setup.
4. Use the image to create VMs, assign to Dev Centers, or create Dev Box Pools according to your organization's setup.

### Activate Docker Desktop

Once your Dev Box is provisioned with the Docker Desktop image:

1. Start your Dev Box instance.
2. Launch Docker Desktop.
3. Sign in with your Docker ID.

## Support

For issues related to:

- Docker Desktop configuration, usage, or licensing: Create a support ticket through [Docker Support](https://hub.docker.com/support).
- Dev Box creation, Azure portal configuration, or networking: Contact Azure Support.

## Limitations

- Microsoft Dev Box is currently only available on Windows 10 and 11 (Linux VMs are not supported).
- Performance may vary based on your Dev Box configuration and network conditions.

---

# Enterprise deployment FAQs

> Frequently asked questions for deploying Docker Desktop at scale

# Enterprise deployment FAQs

   Table of contents

---

## MSI

Common questions about installing Docker Desktop using the MSI installer.

### What happens to user data if they have an older Docker Desktop installation (i.e..exe)?

Users must
[uninstall](https://docs.docker.com/desktop/uninstall/) older `.exe` installations before using the new MSI version. This deletes all Docker containers, images, volumes, and other Docker-related data local to the machine, and removes the files generated by Docker Desktop.

To preserve existing data before uninstalling, users should
[backup](https://docs.docker.com/desktop/settings-and-maintenance/backup-and-restore/) their containers and volumes.

For Docker Desktop 4.30 and later, the `.exe` installer includes a `-keep-data` flag that removes Docker Desktop while preserving underlying resources such as the container VMs:

```powershell
& 'C:\Program Files\Docker\Docker\Docker Desktop Installer.exe' uninstall -keep-data
```

### What happens if the user's machine has an older.exeinstallation?

The MSI installer detects older `.exe` installations and blocks the installation until the previous version is uninstalled. It prompts the user to uninstall their current/old version first, before retrying to install the MSI version.

### My installation failed, how do I find out what happened?

MSI installations may fail silently, offering little diagnostic feedback.

To debug a failed installation, run the install again with verbose logging enabled:

```powershell
msiexec /i "DockerDesktop.msi" /L*V ".\msi.log"
```

After the installation has failed, open the log file and search for occurrences of `value 3`. This is the exit code Windows Installer outputs when it has failed. Just above the line, you will find the reason for the failure.

### Why does the installer prompt for a reboot at the end of every fresh installation?

The installer prompts for a reboot because it assumes that changes have been made to the system that require a reboot to finish their configuration.

For example, if you select the WSL engine, the installer adds the required Windows features. After these features are installed, the system reboots to complete configurations so the WSL engine is functional.

You can suppress reboots by using the `/norestart` option when launching the installer from the command line:

```powershell
msiexec /i "DockerDesktop.msi" /L*V ".\msi.log" /norestart
```

### Why isn't thedocker-usersgroup populated when the MSI is installed with Intune or another MDM solution?

It's common for MDM solutions to install applications in the context of the system account. This means that the `docker-users` group isn't populated with the user's account, as the system account doesn't have access to the user's context.

As an example, you can reproduce this by running the installer with `psexec` in an elevated command prompt:

```powershell
psexec -i -s msiexec /i "DockerDesktop.msi"
```

The installation should complete successfully, but the `docker-users` group won't be populated.

As a workaround, you can create a script that runs in the context of the user account.

The script would be responsible for creating the `docker-users` group and populating it with the correct user.

Here's an example script that creates the `docker-users` group and adds the current user to it (requirements may vary depending on environment):

```powershell
$Group = "docker-users"
$CurrentUser = [System.Security.Principal.WindowsIdentity]::GetCurrent().Name

# Create the group
New-LocalGroup -Name $Group

# Add the user to the group
Add-LocalGroupMember -Group $Group -Member $CurrentUser
```

> Note
>
> After adding a new user to the `docker-users` group, the user must sign out and then sign back in for the changes to take effect.

## MDM

Common questions about deploying Docker Desktop using mobile device management
(MDM) tools such as Jamf, Intune, or Workspace ONE.

### Why doesn't my MDM tool apply all Docker Desktop configuration settings at once?

Some MDM tools, such as Workspace ONE, may not support applying multiple
configuration settings in a single XML file. In these cases, you may need to
deploy each setting in a separate XML file.

Refer to your MDM provider's documentation for specific deployment
requirements or limitations.

---

# Install Docker Desktop from the Microsoft Store on Windows

> Install Docker Desktop for Windows through the Microsoft Store. Understand its update behavior and limitations.

# Install Docker Desktop from the Microsoft Store on Windows

   Table of contents

---

You can deploy Docker Desktop for Windows through the [Microsoft app store](https://apps.microsoft.com/detail/xp8cbj40xlbwkx?hl=en-GB&gl=GB).

The Microsoft Store version of Docker Desktop provides the same functionality as the standard installer but has a different update behavior depending on whether your developers install it themselves or if installation is handled by an MDM tool such as Intune. This is described in the following section.

Choose the installation method that best aligns with your environment's requirements and management practices.

## Update behavior

### Developer-managed installations

For developers who install Docker Desktop directly:

- The Microsoft Store does not automatically update Win32 apps like Docker Desktop for most users.
- Only a subset of users (approximately 20%) may receive update notifications on the Microsoft Store page.
- Most users must manually check for and apply updates within the Store.

### Intune-managed installations

In environments managed with Intune:

- Intune checks for updates approximately every 8 hours.
- When a new version is detected, Intune triggers a `winget` upgrade.
- If appropriate policies are configured, updates can occur automatically without user intervention.
- Updates are handled by Intune's management infrastructure rather than the Microsoft Store itself.

## WSL considerations

Docker Desktop for Windows integrates closely with WSL. When updating Docker Desktop installed from the Microsoft Store:

- Make sure you have quit Docker Desktop and that it is no longer running so updates can complete successfully
- In some environments, virtual hard disk (VHDX) file locks may prevent the update from completing.

## Recommendations for Intune management

If using Intune to manage Docker Desktop for Windows:

- Ensure your Intune policies are configured to handle application updates
- Be aware that the update process uses WinGet APIs rather than direct Store mechanisms
- Consider testing the update process in a controlled environment to verify proper functionality

---

# MSI installer

> Understand how to use the MSI installer. Also explore additional configuration options.

# MSI installer

   Table of contents

---

Subscription: Business Requires: Docker Desktop
[4.32](https://docs.docker.com/desktop/release-notes/#4320) and later For: Administrators

The MSI package supports various MDM (Mobile Device Management) solutions, making it ideal for bulk installations and eliminating the need for manual setups by individual users. With this package, IT administrators can ensure standardized, policy-driven installations of Docker Desktop, enhancing efficiency and software management across their organizations.

## Install interactively

1. In [Docker Home](http://app.docker.com), choose your organization.
2. Select **Admin Console**, then **Enterprise deployment**.
3. From the **Windows OS** tab, select the **Download MSI installer** button.
4. Once downloaded, double-click `Docker Desktop Installer.msi` to run the installer.
5. After accepting the license agreement, choose the install location. By default, Docker Desktop is installed at `C:\Program Files\Docker\Docker`.
6. Configure the Docker Desktop installation. You can:
  - Create a desktop shortcut
  - Set the Docker Desktop service startup type to automatic
  - Disable Windows Container usage
  - Select the Docker Desktop backend: WSL or Hyper-V. If only one is supported by your system, you won't be able to choose.
7. Follow the instructions on the installation wizard to authorize the installer and proceed with the install.
8. When the installation is successful, select **Finish** to complete the installation process.

If your administrator account is different from your user account, you must add the user to the **docker-users** group to access features that require higher privileges, such as creating and managing the Hyper-V VM, or using Windows containers:

1. Run **Computer Management** as an **administrator**.
2. Navigate to **Local Users and Groups** > **Groups** > **docker-users**.
3. Right-click to add the user to the group.
4. Sign out and sign back in for the changes to take effect.

> Note
>
> When installing Docker Desktop with the MSI, in-app updates are automatically disabled. This ensures organizations can maintain version consistency and prevent unapproved updates. For Docker Desktop installed with the .exe installer, in-app updates remain supported.
>
>
>
> Docker Desktop notifies you when an update is available. To update Docker Desktop, download the latest installer from the Docker Admin Console. Navigate to the **Enterprise deployment** page.
>
>
>
> To keep up to date with new releases, check the
> [release notes](https://docs.docker.com/desktop/release-notes/) page.

## Install from the command line

This section covers command line installations of Docker Desktop using PowerShell. It provides common installation commands that you can run. You can also add additional arguments which are outlined in [configuration options](#configuration-options).

When installing Docker Desktop, you can choose between interactive or non-interactive installations.

Interactive installations, without specifying `/quiet` or `/qn`, display the user interface and let you select your own properties.

When installing via the user interface it's possible to:

- Choose the destination folder
- Create a desktop shortcut
- Configure the Docker Desktop service startup type
- Disable Windows Containers
- Choose between the WSL or Hyper-V engine

Non-interactive installations are silent and any additional configuration must be passed as arguments.

### Common installation commands

> Important
>
> Admin rights are required to run any of the following commands.

#### Install interactively with verbose logging

```powershell
msiexec /i "DockerDesktop.msi" /L*V ".\msi.log"
```

#### Install interactively without verbose logging

```powershell
msiexec /i "DockerDesktop.msi"
```

#### Install non-interactively with verbose logging

```powershell
msiexec /i "DockerDesktop.msi" /L*V ".\msi.log" /quiet
```

#### Install non-interactively and suppressing reboots

```powershell
msiexec /i "DockerDesktop.msi" /L*V ".\msi.log" /quiet /norestart
```

#### Install non-interactively with admin settings

```powershell
msiexec /i "DockerDesktop.msi" /L*V ".\msi.log" /quiet /norestart ADMINSETTINGS="{""configurationFileVersion"":2,""enhancedContainerIsolation"":{""value"":true,""locked"":false}}" ALLOWEDORG="your-organization"
```

#### Install interactively and allow users to switch to Windows containers without admin rights

```powershell
msiexec /i "DockerDesktop.msi" /L*V ".\msi.log" /quiet /norestart ALLOWEDORG="your-organization" ALWAYSRUNSERVICE=1
```

#### Install interactively specifying a PAC file

```powershell
PowerShell
 msiexec --% /i "DockerDesktop.msi" /L*V ".\msi.log"  PROXYHTTPMODE="manual" OVERRIDEPROXYPAC="http://localhost:8080/myproxy.pac"
```

#### Install interactively specifying a PAC script

```powershell
PowerShell
 msiexec --% /i "DockerDesktop.msi" /L*V ".\msi.log"  PROXYHTTPMODE="manual" OVERRIDEPROXYEMBEDDEDPAC="function FindProxyForURL(url,host) {return ""DIRECT"" ;; }"
```

#### Install with the passive display option

You can use the `/passive` display option instead of `/quiet` when you want to perform a non-interactive installation but show a progress dialog.

In passive mode the installer doesn't display any prompts or error messages to the user and the installation cannot be cancelled.

For example:

```powershell
msiexec /i "DockerDesktop.msi" /L*V ".\msi.log" /passive /norestart
```

> Tip
>
> When creating a value that expects a JSON string:
>
>
>
> - The property expects a JSON formatted string
> - The string should be wrapped in double quotes
> - The string shouldn't contain any whitespace
> - Property names are expected to be in double quotes

### Common uninstall commands

When uninstalling Docker Desktop, you need to use the same `.msi` file that was originally used to install the application.

If you no longer have the original `.msi` file, you need to use the product code associated with the installation. To find the product code, run:

```powershell
Get-WmiObject Win32_Product | Select-Object IdentifyingNumber, Name | Where-Object {$_.Name -eq "Docker Desktop"}
```

It should return output similar to the following:

```text
IdentifyingNumber                      Name
-----------------                      ----
{10FC87E2-9145-4D7D-B493-2E99E8D8E103} Docker Desktop
```

> Note
>
> This command may take some time, depending on the number of installed applications.

`IdentifyingNumber` is the applications product code and can be used to uninstall Docker Desktop. For example:

```powershell
msiexec /x {10FC87E2-9145-4D7D-B493-2E99E8D8E103} /L*V ".\msi.log" /quiet
```

#### Uninstall interactively with verbose logging

```powershell
msiexec /x "DockerDesktop.msi" /L*V ".\msi.log"
```

#### Uninstall interactively without verbose logging

```powershell
msiexec /x "DockerDesktop.msi"
```

#### Uninstall non-interactively with verbose logging

```powershell
msiexec /x "DockerDesktop.msi" /L*V ".\msi.log" /quiet
```

#### Uninstall non-interactively without verbose logging

```powershell
msiexec /x "DockerDesktop.msi" /quiet
```

### Configuration options

> Important
>
> In addition to the following custom properties, the Docker Desktop MSI installer also supports the standard [Windows Installer command line options](https://learn.microsoft.com/en-us/windows/win32/msi/standard-installer-command-line-options).

| Property | Description | Default |
| --- | --- | --- |
| ENABLEDESKTOPSHORTCUT | Creates a desktop shortcut. | 1 |
| INSTALLFOLDER | Specifies a custom location where Docker Desktop will be installed. | C:\Program Files\Docker |
| ADMINSETTINGS | Automatically creates anadmin-settings.jsonfile which is used tocontrol certain Docker Desktop settingson client machines within organizations. It must be used together with theALLOWEDORGproperty. | None |
| ALLOWEDORG | Requires the user to sign in and be part of the specified Docker Hub organization when running the application. This creates a registry key calledallowedOrgsinHKLM\Software\Policies\Docker\Docker Desktop. | None |
| ALWAYSRUNSERVICE | Lets users switch to Windows containers without needing admin rights | 0 |
| DISABLEWINDOWSCONTAINERS | Disables the Windows containers integration | 0 |
| ENGINE | Sets the Docker Engine that's used to run containers. This can be eitherwsl,hyperv, orwindows | wsl |
| PROXYENABLEKERBEROSNTLM | When set to 1, enables support for Kerberos and NTLM proxy authentication. Available with Docker Desktop 4.33 and later | 0 |
| PROXYHTTPMODE | Sets the HTTP Proxy mode. This can be eithersystemormanual | system |
| OVERRIDEPROXYHTTP | Sets the URL of the HTTP proxy that must be used for outgoing HTTP requests. | None |
| OVERRIDEPROXYHTTPS | Sets the URL of the HTTP proxy that must be used for outgoing HTTPS requests. | None |
| OVERRIDEPROXYEXCLUDE | Bypasses proxy settings for the hosts and domains. Uses a comma-separated list. | None |
| OVERRIDEPROXYPAC | Sets the PAC file URL. This setting takes effect only when usingmanualproxy mode. | None |
| OVERRIDEPROXYEMBEDDEDPAC | Specifies an embedded PAC (Proxy Auto-Config) script. This setting takes effect only when usingmanualproxy mode and has precedence over theOVERRIDEPROXYPACflag. | None |
| HYPERVDEFAULTDATAROOT | Specifies the default location for the Hyper-V VM disk. | None |
| WINDOWSCONTAINERSDEFAULTDATAROOT | Specifies the default location for Windows containers. | None |
| WSLDEFAULTDATAROOT | Specifies the default location for the WSL distribution disk. | None |
| DISABLEANALYTICS | When set to 1, analytics collection will be disabled for the MSI. For more information, seeAnalytics. | 0 |

Additionally, you can also use `/norestart` or `/forcerestart` to control reboot behaviour.

By default, the installer reboots the machine after a successful installation. When run silently, the reboot is automatic and the user is not prompted.

## Analytics

The MSI installer collects anonymous usage statistics relating to installation only. This is to better understand user behaviour and to improve the user experience by identifying and addressing issues or optimizing popular features.

### How to opt-out

When you install Docker Desktop from the default installer GUI, select the **Disable analytics** checkbox located on the bottom-left corner of the **Welcome** dialog.

When you install Docker Desktop from the command line, use the `DISABLEANALYTICS` property.

```powershell
msiexec /i "win\msi\bin\en-US\DockerDesktop.msi" /L*V ".\msi.log" DISABLEANALYTICS=1
```

### Persistence

If you decide to disable analytics for an installation, your choice is persisted in the registry and honoured across future upgrades and uninstalls.

However, the key is removed when Docker Desktop is uninstalled and must be configured again via one of the previous methods.

The registry key is as follows:

```powershell
SOFTWARE\Docker Inc.\Docker Desktop\DisableMsiAnalytics
```

When analytics is disabled, this key is set to `1`.

## Additional resources

- [Explore the FAQs](https://docs.docker.com/enterprise/enterprise-deployment/faq/)

---

# PKG installer

> Understand how to use the PKG installer. Also explore additional configuration options.

# PKG installer

   Table of contents

---

Subscription: Business Requires: Docker Desktop
[4.36](https://docs.docker.com/desktop/release-notes/#4360) and later For: Administrators

The PKG package supports various MDM (Mobile Device Management) solutions, making it ideal for bulk installations and eliminating the need for manual setups by individual users. With this package, IT administrators can ensure standardized, policy-driven installations of Docker Desktop, enhancing efficiency and software management across their organizations.

## Install interactively

1. In [Docker Home](http://app.docker.com), choose your organization.
2. Select **Admin Console**, then **Enterprise deployment**.
3. From the **macOS** tab, select the **Download PKG installer** button.
4. Once downloaded, double-click `Docker.pkg` to run the installer.
5. Follow the instructions on the installation wizard to authorize the installer and proceed with the installation.
  - **Introduction**: Select **Continue**.
  - **License**: Review the license agreement and select **Agree**.
  - **Destination Select**: This step is optional. It is recommended that you keep the default installation destination (usually `Macintosh HD`). Select **Continue**.
  - **Installation Type**: Select **Install**.
  - **Installation**: Authenticate using your administrator password or Touch ID.
  - **Summary**: When the installation completes, select **Close**.

> Note
>
> When installing Docker Desktop with the PKG, in-app updates are automatically disabled. This ensures organizations can maintain version consistency and prevent unapproved updates. For Docker Desktop installed with the `.dmg` installer, in-app updates remain supported.
>
>
>
> Docker Desktop notifies you when an update is available. To update Docker Desktop, download the latest installer from the Docker Admin Console. Navigate to the **Enterprise deployment** page.
>
>
>
> To keep up to date with new releases, check the
> [release notes](https://docs.docker.com/desktop/release-notes/) page.

## Install from the command line

1. In [Docker Home](http://app.docker.com), choose your organization.
2. Select **Admin Console**, then **Enterprise deployment**.
3. From the **macOS** tab, select the **Download PKG installer** button.
4. From your terminal, run the following command:
  ```console
  $ sudo installer -pkg "/path/to/Docker.pkg" -target /Applications
  ```

## Additional resources

- See how you can deploy Docker Desktop for Mac using [Intune](https://docs.docker.com/enterprise/enterprise-deployment/use-intune/) or [Jamf Pro](https://docs.docker.com/enterprise/enterprise-deployment/use-jamf-pro/)
- Explore how to
  [Enforce sign-in](https://docs.docker.com/enterprise/security/enforce-sign-in/methods/#plist-method-mac-only) for your users.

---

# Deploy with Intune

> Use Intune, Microsoft's cloud-based device management tool, to deploy Docker Desktop

# Deploy with Intune

   Table of contents

---

For: Administrators

Learn how to deploy Docker Desktop on Windows and macOS devices using Microsoft Intune. It covers app creation, installer configuration, and assignment to users or devices.

1. Sign in to your Intune admin center.
2. Add a new app. Select **Apps**, then **Windows**, then **Add**.
3. For the app type, select **Windows app (Win32)**
4. Select the `intunewin` package.
5. Fill in the required details, such as the description, publisher, or app version and then select **Next**.
6. Optional: On the **Program** tab, you can update the **Install command** field to suit your needs. The field is pre-populated with `msiexec /i "DockerDesktop.msi" /qn`. See the [Common installation scenarios](https://docs.docker.com/enterprise/enterprise-deployment/msi-install-and-configure/) for examples on the changes you can make.
  > Tip
  >
  > It's recommended you configure the Intune deployment to schedule a reboot of the machine on successful installs.
  >
  >
  >
  > This is because the Docker Desktop installer installs Windows features depending on your engine selection and also updates the membership of the `docker-users` local group.
  >
  >
  >
  > You may also want to set Intune to determine behaviour based on return codes and watch for a return code of `3010`. Return code 3010 means the installation succeeded but a reboot is required.
7. Complete the remaining tabs, then review and create the app.

First, upload the package:

1. Sign in to your Intune admin center.
2. Add a new app. Select **Apps**, then **macOS**, then **Add**.
3. Select **Line-of-business app** and then **Select**.
4. Upload the `Docker.pkg` file and fill in the required details.

Next, assign the app:

1. Once the app is added, navigate to **Assignments** in Intune.
2. Select **Add group** and choose the user or device groups you want to assign the app to.
3. Select **Save**.

## Additional resources

- [Explore the FAQs](https://docs.docker.com/enterprise/enterprise-deployment/faq/).
- Learn how to
  [enforce sign-in](https://docs.docker.com/enterprise/security/enforce-sign-in/) for your users.

---

# Deploy with Jamf Pro

> Use Jamf Pro to deploy Docker Desktop for Mac

# Deploy with Jamf Pro

   Table of contents

---

For: Administrators

Learn how to deploy Docker Desktop for Mac using Jamf Pro, including uploading the installer and creating a deployment policy.

First, upload the package:

1. From the Jamf Pro console, navigate to **Computers** > **Management Settings** > **Computer Management** > **Packages**.
2. Select **New** to add a new package.
3. Upload the `Docker.pkg` file.

Next, create a policy for deployment:

1. Navigate to **Computers** > **Policies**.
2. Select **New** to create a new policy.
3. Enter a name for the policy, for example "Deploy Docker Desktop".
4. Under the **Packages** tab, add the Docker package you uploaded.
5. Configure the scope to target the devices or device groups on which you want to install Docker.
6. Save the policy and deploy.

For more information, see [Jamf Pro's official documentation](https://learn.jamf.com/en-US/bundle/jamf-pro-documentation-current/page/Policies.html).

## Additional resources

- Learn how to
  [enforce sign-in](https://docs.docker.com/enterprise/security/enforce-sign-in/) for your users.

---

# Deploy Docker Desktop

> If you're an IT admin, learn how to deploy Docker Desktop at scale

# Deploy Docker Desktop

---

Docker Desktop supports scalable deployment options tailored for enterprise IT environments. Whether you're rolling out Docker across hundreds of developer workstations or enforcing consistent configuration through MDM solutions like Intune or Jamf, this section provides everything you need to install, configure, and manage Docker Desktop in a secure, repeatable way. Learn how to use MSI and PKG installers, configure default settings, control updates, and ensure compliance with your organization's policiesâ€”across Windows, macOS, and Linux systems.

[MSI installerLearn how to install Docker Desktop with the MSI installer.](https://docs.docker.com/enterprise/enterprise-deployment/msi-install-and-configure/)[PKG installerLearn how to install Docker Desktop with the PKG installer.](https://docs.docker.com/enterprise/enterprise-deployment/pkg-install-and-configure/)[MS StoreLearn how to install Docker Desktop through the Microsoft Store.](https://docs.docker.com/enterprise/enterprise-deployment/ms-store/)[Deploy with IntuneLearn how to deploy Docker Desktop on Windows and macOS devices using Microsoft Intune.](https://docs.docker.com/enterprise/enterprise-deployment/use-intune/)[Deploy with Jamf ProLearn how to deploy Docker Desktop for Mac using Jamf Pro](https://docs.docker.com/enterprise/enterprise-deployment/use-jamf-pro/)[Docker Desktop for Microsoft Dev BoxInstall Docker Desktop for Microsoft Dev Box via the Microsoft Azure Marketlplace](https://docs.docker.com/enterprise/enterprise-deployment/dev-box/)[FAQsCommon questions when deploying Docker Desktop](https://docs.docker.com/enterprise/enterprise-deployment/faq/)

---

# Organization access tokens

> Create and manage organization access tokens to securely authenticate automated systems and CI/CD pipelines with Docker Hub

# Organization access tokens

   Table of contents

---

Subscription: Team  Business

Organization access tokens (OATs) provide secure, programmatic access to Docker Hub for automated systems, CI/CD pipelines, and other business-critical tasks. Unlike personal access tokens tied to individual users, OATs are associated with your organization and can be managed by any organization owner.

> Warning
>
> Organization access tokens are incompatible with Docker Desktop, Image Access Management, and Registry Access Management. If you use these features, use
> [personal access tokens](https://docs.docker.com/security/access-tokens/) instead.

## Who should use organization access tokens?

Use OATs for automated systems that need Docker Hub access without depending on individual user accounts:

- CI/CD pipelines: Build and deployment systems that push and pull images
- Production systems: Applications that pull images during deployment
- Monitoring tools: Systems that need to check repository status or pull images
- Backup systems: Tools that periodically pull images for archival
- Integration services: Third-party tools that integrate with your Docker Hub repositories

## Key benefits

Benefits of using organization access tokens include:

- Organizational ownership: Not tied to individual users who might leave the company
- Shared management: All organization owners can create and manage OATs
- Separate usage limits: OATs have their own Docker Hub rate limits, not counting against personal accounts
- Better security audit: Track when tokens were last used and identify suspicious activity
- Granular permissions: Limit access to specific repositories and operations

## Prerequisites

To create and use organization access tokens, you must have:

- A Docker Team or Business subscription
- Owner permissions
- Repositories you want to grant access to

## Create an organization access token

Owners can create tokens with these limits:

- Team subscription: Up to 10 OATs per organization
- Business subscription: Up to 100 OATs per organization

Expired tokens count toward your total limit.

To create an OAT:

1. Sign in to [Docker Home](https://app.docker.com/) and select your
  organization.
2. Select **Admin Console**, then **Access tokens**.
3. Select **Generate access token**.
4. Configure token details:
  - Label: Descriptive name indicating the token's purpose
  - Description (optional): Additional details
  - Expiration date: When the token should expire
5. Expand the **Repository** drop-down to set access permissions:
  1. Optional. Select **Read public repositories** for access to public repositories.
  2. Select **Add repository** and choose a repository from the drop-down.
  3. Set permissions for each repository: **Image Pull** or **Image Push**.
  4. Add up to 50 repositories as needed.
6. Optional. Configure organization management permissions by expanding the **Organization** drop-down and selecting the **Allow management access to this organization's resources**:
  - **Member Edit**: Edit members of the organization
  - **Member Read**: Read members of the organization
  - **Invite Edit**: Invite members to the organization
  - **Invite Read**: Read invites to the organization
  - **Group Edit**: Edit groups of the organization
  - **Group Read**: Read groups of the organization
7. Select **Generate token**. Copy the token that appears on the screen and save it. You won't be able to retrieve the token once you exit the screen.

> Important
>
> Treat organization access tokens like passwords. Store them securely in a credential manager and never commit them to source code repositories.

## Use organization access tokens

Sign in to the Docker CLI using your organization access token:

```console
$ docker login --username YOUR_ORGANIZATION_NAME
Password: [paste your OAT here]
```

When prompted for a password, enter your organization access token.

## Modify existing tokens

To manage existing tokens:

1. Sign in to [Docker Home](https://app.docker.com/) and select your
  organization.
2. Select **Admin Console**, then **Access tokens**.
3. Select the actions menu in the token row, you can:
  - **Edit**
  - **Deactivate**
  - **Delete**
4. Select **Save** after making changes to a token.

## Migrate from service accounts

[Enhanced Service Account add-ons](https://docs.docker.com/docker-hub/service-accounts/)
are deprecated and no longer available for
new purchases as of December 10, 2024.

Organization access tokens provide a
modern, secure replacement with additional benefits:

| Feature | Service accounts | Organization access tokens |
| --- | --- | --- |
| Authentication | Username/password | Organization name + token |
| Cost | Tiered add-on pricing | Included with subscription |
| Management | Individual account-based | Organization owner managed |
| Repository access | Full account access | Granular repository permissions |
| Security | Basic password auth | Token-based with expiration |
| Rate limits | Separate tiered limits | Organization subscription limits |

### Migration steps

To migrate from service accounts to OATs, use the following steps:

1. Document current service accounts and their purposes.
2. Generate organization access tokens with appropriate repository permissions.
3. Replace service account credentials in your systems.
4. Validate all automated workflows work correctly.
5. Remove deprecated service account credentials.

## Organization access token best practices

- Regular token rotation: Set reasonable expiration dates and rotate tokens regularly to minimize security risks.
- Principle of least privilege: Grant only the minimum repository access and permissions needed for each use case.
- Monitor token usage: Regularly review when tokens were last used to identify unused or suspicious tokens.
- Secure storage: Store tokens in secure credential management systems, never in plain text or source code.
- Immediate revocation: Deactivate or delete tokens immediately if they're compromised or no longer needed.

---

# Manage domains

> Add, verify, and manage domains to control user access and enable auto-provisioning in Docker organizations

# Manage domains

   Table of contents

---

Subscription: Business For: Administrators

Domain management lets you add and verify domains for your organization, then enable auto-provisioning to automatically add users when they sign in with email addresses that match your verified domains. This approach simplifies user management, ensures consistent security settings, and reduces the risk of unmanaged users accessing Docker without visibility or control.

This page provides steps to add and delete domains, configure auto-provisioning, and audit uncaptured users.

## Add and verify a domain

Adding a domain requires verification to confirm ownership. The verification process uses DNS records to prove you control the domain.

### Add a domain

1. Sign in to [Docker Home](https://app.docker.com) and select
  your organization. If your organization is part of a company, select the company
  and configure the domain for the organization at the company level.
2. Select **Admin Console**, then **Domain management**.
3. Select **Add a domain**.
4. Enter your domain and select **Add domain**.
5. In the pop-up modal, copy the **TXT Record Value** to verify your domain.

### Verify a domain

Verification confirms that you own the domain by adding a TXT record to your Domain Name System (DNS) host. It can take up to 72 hours for the DNS change to propagate. Docker automatically checks for the record and confirms ownership once the change is recognized.

> Tip
>
> The record name field determines where the TXT record is added in your domain (root or subdomain). For root domains like `example.com`, use `@` or leave the record name empty, depending on your provider. Don't enter values like docker, `docker-verification`, `www`, or your domain name, as these may direct to the wrong place. Check your DNS provider's documentation to verify record name requirements.

Follow the steps for your DNS provider to add the **TXT Record Value**. If
your provider isn't listed, use the steps for "Other providers":

1. Add your TXT record to AWS by following [Creating records by using the Amazon Route 53 console](https://docs.aws.amazon.com/Route53/latest/DeveloperGuide/resource-record-sets-creating.html).
2. Wait up to 72 hours for TXT record verification.
3. Return to the **Domain management** page of the
  [Admin Console](https://app.docker.com/admin) and select **Verify** next to
  your domain name.

1. Add your TXT record to Google Cloud DNS by following [Verifying your domain with a TXT record](https://cloud.google.com/identity/docs/verify-domain-txt).
2. Wait up to 72 hours for TXT record verification.
3. Return to the **Domain management** page of the
  [Admin Console](https://app.docker.com/admin) and select **Verify** next to
  your domain name.

1. Add your TXT record to GoDaddy by following [Add a TXT record](https://www.godaddy.com/help/add-a-txt-record-19232).
2. Wait up to 72 hours for TXT record verification.
3. Return to the **Domain management** page of the
  [Admin Console](https://app.docker.com/admin) and select **Verify** next to
  your domain name.

1. Sign in to your domain host.
2. Add a TXT record to your DNS settings using the **TXT Record Value** from Docker.
3. Wait up to 72 hours for TXT record verification.
4. Return to the **Domain management** page of the
  [Admin Console](https://app.docker.com/admin) and select **Verify** next to
  your domain name.

## Configure auto-provisioning

Auto-provisioning automatically adds users to your organization when they sign in with email addresses that match your verified domains. You must verify a domain before enabling auto-provisioning.

> Important
>
> For domains that are part of an SSO connection, Just-in-Time (JIT) provisioning takes precedence over auto-provisioning when adding users to an organization.

### How auto-provisioning works

When auto-provisioning is enabled for a verified domain:

- Users who sign in to Docker with matching email addresses are automatically added to your organization.
- Auto-provisioning only adds existing Docker users to your organization, it doesn't create new accounts.
- Users experience no changes to their sign-in process.
- Company and organization owners receive email notifications when new users are added.
- You may need to
  [manage seats](https://docs.docker.com/subscription/manage-seats/) to accommodate new users.

### Enable auto-provisioning

Auto-provisioning is configured per domain. To enable it:

1. Sign in to [Docker Home](https://app.docker.com) and select
  your company or organization.
2. Select **Admin Console**, then **Domain management**.
3. Select the **Actions menu** next to the domain you want to enable
  auto-provisioning for.
4. Select **Enable auto-provisioning**.
5. Optional. If enabling auto-provisioning at the company level, select an
  organization.
6. Select **Enable** to confirm.

The **Auto-provisioning** column will update to **Enabled** for the domain.

### Disable auto-provisioning

To disable auto-provisioning for a user:

1. Sign in to [Docker Home](https://app.docker.com) and select
  your organization. If your organization is part of a company, select the company
  and configure the domain for the organization at the company level.
2. Select **Admin Console**, then **Domain management**.
3. Select the **Actions menu** next to your domain.
4. Select **Disable auto-provisioning**.
5. Select **Disable** to confirm.

## Audit domains for uncaptured users

Subscription: Business For: Administrators

Domain audit identifies uncaptured users. Uncaptured users are Docker users who have authenticated using an email address associated with your verified domains but aren't members of your Docker organization.

### Limitations

Domain audit can't identify:

- Users who access Docker Desktop without authenticating
- Users who authenticate using an account that doesn't have an
  email address associated with one of your verified domains

To prevent unidentifiable users from accessing Docker Desktop,
[enforce sign-in](https://docs.docker.com/enterprise/security/enforce-sign-in/).

### Run a domain audit

1. Sign in to [Docker Home](https://app.docker.com) and choose your
  company.
2. Select **Admin Console**, then **Domain management**.
3. In **Domain audit**, select **Export Users** to export a CSV file
  of uncaptured users.

The CSV file contains the following columns:

- Name: Docker user's display name
- Username: Docker ID of the user
- Email: Email address of the user

### Invite uncaptured users

You can bulk invite uncaptured users to your organization using the exported
CSV file. For more information on bulk inviting users, see
[Manage organization members](https://docs.docker.com/admin/organization/members/).

## Delete a domain

Deleting a domain removes its TXT record value and disables any associated auto-provisioning.

> Warning
>
> Deleting a domain will disable auto-provisioning for that domain and remove verification. This action cannot be undone.

To delete a domain:

1. Sign in to [Docker Home](https://app.docker.com) and select
  your organization. If your organization is part of a company, select the company
  and configure the domain for the organization at the company level.
2. Select **Admin Console**, then **Domain management**.
3. For the domain you want to delete, select the **Actions** menu, then
  **Delete domain**.
4. To confirm, select **Delete domain** in the pop-up modal.
